{"ast":null,"code":"/**\r\n * DevExtreme (esm/__internal/ui/context_menu/m_context_menu.js)\r\n * Version: 24.2.7\r\n * Build date: Mon Apr 28 2025\r\n *\r\n * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { fx } from \"../../../common/core/animation\";\nimport animationPosition from \"../../../common/core/animation/position\";\nimport { name as contextMenuEventName } from \"../../../common/core/events/contextmenu\";\nimport eventsEngine from \"../../../common/core/events/core/events_engine\";\nimport holdEvent from \"../../../common/core/events/hold\";\nimport { addNamespace } from \"../../../common/core/events/utils/index\";\nimport registerComponent from \"../../../core/component_registrator\";\nimport devices from \"../../../core/devices\";\nimport domAdapter from \"../../../core/dom_adapter\";\nimport { getPublicElement } from \"../../../core/element\";\nimport Guid from \"../../../core/guid\";\nimport $ from \"../../../core/renderer\";\nimport { noop } from \"../../../core/utils/common\";\nimport { Deferred } from \"../../../core/utils/deferred\";\nimport { contains } from \"../../../core/utils/dom\";\nimport { extend } from \"../../../core/utils/extend\";\nimport { each } from \"../../../core/utils/iterator\";\nimport { getOuterHeight } from \"../../../core/utils/size\";\nimport { isDefined, isFunction, isObject, isPlainObject, isRenderer, isWindow } from \"../../../core/utils/type\";\nimport { getWindow, hasWindow } from \"../../../core/utils/window\";\nimport Overlay from \"../../../ui/overlay/ui.overlay\";\nimport Scrollable from \"../../../ui/scroll_view/ui.scrollable\";\nimport { current as currentTheme, isGeneric } from \"../../../ui/themes\";\nimport MenuBase from \"../../ui/context_menu/m_menu_base\";\nconst DX_MENU_CLASS = \"dx-menu\";\nconst DX_MENU_ITEM_CLASS = \"dx-menu-item\";\nconst DX_MENU_ITEM_EXPANDED_CLASS = \"dx-menu-item-expanded\";\nconst DX_MENU_PHONE_CLASS = \"dx-menu-phone-overlay\";\nconst DX_MENU_ITEMS_CONTAINER_CLASS = \"dx-menu-items-container\";\nconst DX_MENU_ITEM_WRAPPER_CLASS = \"dx-menu-item-wrapper\";\nconst DX_SUBMENU_CLASS = \"dx-submenu\";\nconst DX_CONTEXT_MENU_CLASS = \"dx-context-menu\";\nconst DX_HAS_CONTEXT_MENU_CLASS = \"dx-has-context-menu\";\nconst DX_STATE_DISABLED_CLASS = \"dx-state-disabled\";\nconst DX_STATE_FOCUSED_CLASS = \"dx-state-focused\";\nconst DX_STATE_HOVER_CLASS = \"dx-state-hover\";\nconst OVERLAY_CONTENT_CLASS = \"dx-overlay-content\";\nconst SCROLLABLE_CLASS = \"dx-scrollable\";\nconst FOCUS_UP = \"up\";\nconst FOCUS_DOWN = \"down\";\nconst FOCUS_LEFT = \"left\";\nconst FOCUS_RIGHT = \"right\";\nconst FOCUS_FIRST = \"first\";\nconst FOCUS_LAST = \"last\";\nconst ACTIONS = [\"onShowing\", \"onShown\", \"onSubmenuCreated\", \"onHiding\", \"onHidden\", \"onPositioning\", \"onLeftFirstItem\", \"onLeftLastItem\", \"onCloseRootSubmenu\", \"onExpandLastSubmenu\"];\nconst LOCAL_SUBMENU_DIRECTIONS = [\"up\", \"down\", \"first\", \"last\"];\nconst DEFAULT_SHOW_EVENT = \"dxcontextmenu\";\nconst SUBMENU_PADDING = 10;\nconst BORDER_WIDTH = 1;\nconst window = getWindow();\nclass ContextMenu extends MenuBase {\n  getShowEvent(showEventOption) {\n    if (isObject(showEventOption)) {\n      if (null !== showEventOption.name) {\n        return showEventOption.name ?? \"dxcontextmenu\";\n      }\n    } else {\n      return showEventOption;\n    }\n    return null;\n  }\n  getShowDelay(showEventOption) {\n    return isObject(showEventOption) && showEventOption.delay;\n  }\n  _getDefaultOptions() {\n    return extend(super._getDefaultOptions(), {\n      showEvent: \"dxcontextmenu\",\n      hideOnOutsideClick: true,\n      position: {\n        at: \"top left\",\n        my: \"top left\"\n      },\n      onShowing: null,\n      onShown: null,\n      onSubmenuCreated: null,\n      onHiding: null,\n      onHidden: null,\n      onPositioning: null,\n      submenuDirection: \"auto\",\n      visible: false,\n      target: void 0,\n      onLeftFirstItem: null,\n      onLeftLastItem: null,\n      onCloseRootSubmenu: null,\n      onExpandLastSubmenu: null\n    });\n  }\n  _defaultOptionsRules() {\n    return super._defaultOptionsRules().concat([{\n      device: () => !hasWindow(),\n      options: {\n        animation: null\n      }\n    }]);\n  }\n  _setDeprecatedOptions() {\n    super._setDeprecatedOptions();\n    extend(this._deprecatedOptions, {\n      closeOnOutsideClick: {\n        since: \"22.2\",\n        alias: \"hideOnOutsideClick\"\n      }\n    });\n  }\n  _initActions() {\n    this._actions = {};\n    each(ACTIONS, (index, action) => {\n      this._actions[action] = this._createActionByOption(action) || noop;\n    });\n  }\n  _setOptionsByReference() {\n    super._setOptionsByReference();\n    extend(this._optionsByReference, {\n      animation: true,\n      selectedItem: true\n    });\n  }\n  _focusInHandler() {}\n  _itemContainer() {\n    return this._overlay ? this._overlay.$content() : $();\n  }\n  _eventBindingTarget() {\n    return this._itemContainer();\n  }\n  itemsContainer() {\n    return this._overlay ? this._overlay.$content() : void 0;\n  }\n  _supportedKeys() {\n    return extend(super._supportedKeys(), {\n      space: () => {\n        const $item = $(this.option(\"focusedElement\"));\n        this.hide();\n        if (!$item.length || !this._isSelectionEnabled()) {\n          return;\n        }\n        this.selectItem($item[0]);\n      },\n      escape: this.hide\n    });\n  }\n  _getActiveItem(last) {\n    const $availableItems = this._getAvailableItems();\n    const $focusedItem = $availableItems.filter(\".dx-state-focused\");\n    const $hoveredItem = $availableItems.filter(\".dx-state-hover\");\n    const $hoveredItemContainer = $hoveredItem.closest(\".dx-menu-items-container\");\n    if ($hoveredItemContainer.find(\".dx-menu-item\").index($focusedItem) >= 0) {\n      return $focusedItem;\n    }\n    if ($hoveredItem.length) {\n      return $hoveredItem;\n    }\n    return super._getActiveItem();\n  }\n  _moveFocus(location) {\n    const $items = this._getItemsByLocation(location);\n    const $oldTarget = this._getActiveItem(true);\n    const $hoveredItem = this.itemsContainer().find(\".dx-state-hover\");\n    const $focusedItem = $(this.option(\"focusedElement\"));\n    const $activeItemHighlighted = !!($focusedItem.length || $hoveredItem.length);\n    let $newTarget;\n    switch (location) {\n      case \"up\":\n        $newTarget = $activeItemHighlighted ? this._prevItem($items) : $oldTarget;\n        this._setFocusedElement($newTarget);\n        if ($oldTarget.is($items.first())) {\n          this._actions.onLeftFirstItem($oldTarget);\n        }\n        break;\n      case \"down\":\n        $newTarget = $activeItemHighlighted ? this._nextItem($items) : $oldTarget;\n        this._setFocusedElement($newTarget);\n        if ($oldTarget.is($items.last())) {\n          this._actions.onLeftLastItem($oldTarget);\n        }\n        break;\n      case \"right\":\n        $newTarget = this.option(\"rtlEnabled\") ? this._hideSubmenuHandler() : this._expandSubmenuHandler($items, location);\n        this._setFocusedElement($newTarget);\n        break;\n      case \"left\":\n        $newTarget = this.option(\"rtlEnabled\") ? this._expandSubmenuHandler($items, location) : this._hideSubmenuHandler();\n        this._setFocusedElement($newTarget);\n        break;\n      case \"first\":\n        $newTarget = $items.first();\n        this._setFocusedElement($newTarget);\n        break;\n      case \"last\":\n        $newTarget = $items.last();\n        this._setFocusedElement($newTarget);\n        break;\n      default:\n        return super._moveFocus(location);\n    }\n  }\n  _setFocusedElement($element) {\n    if ($element && 0 !== $element.length) {\n      this.option(\"focusedElement\", getPublicElement($element));\n      this._scrollToElement($element);\n    }\n  }\n  _scrollToElement($element) {\n    const $scrollableElement = $element.closest(\".dx-scrollable\");\n    const scrollableInstance = $scrollableElement.dxScrollable(\"instance\");\n    null === scrollableInstance || void 0 === scrollableInstance || scrollableInstance.scrollToElement($element);\n  }\n  _getItemsByLocation(location) {\n    const $activeItem = this._getActiveItem(true);\n    let $items;\n    if (LOCAL_SUBMENU_DIRECTIONS.includes(location)) {\n      $items = $activeItem.closest(\".dx-menu-items-container\").children().children();\n    }\n    $items = this._getAvailableItems($items);\n    return $items;\n  }\n  _getAriaTarget() {\n    return this.$element();\n  }\n  _refreshActiveDescendant() {\n    if (isDefined(this._overlay)) {\n      const $target = this._overlay.$content();\n      super._refreshActiveDescendant($target);\n    }\n  }\n  _hideSubmenuHandler() {\n    const $curItem = this._getActiveItem(true);\n    const $parentItem = $curItem.parents(\".dx-menu-item-expanded\").first();\n    if ($parentItem.length) {\n      this._hideSubmenusOnSameLevel($parentItem);\n      this._hideSubmenu($curItem.closest(\".dx-submenu\"));\n      return $parentItem;\n    }\n    this._actions.onCloseRootSubmenu($curItem);\n  }\n  _expandSubmenuHandler($items, location) {\n    const $curItem = this._getActiveItem(true);\n    const itemData = this._getItemData($curItem);\n    const node = this._dataAdapter.getNodeByItem(itemData);\n    const isItemHasSubmenu = this._hasSubmenu(node);\n    const $submenu = $curItem.children(\".dx-submenu\");\n    if (isItemHasSubmenu && !$curItem.hasClass(\"dx-state-disabled\")) {\n      if (!$submenu.length || \"hidden\" === $submenu.css(\"visibility\")) {\n        this._showSubmenu($curItem);\n      }\n      return this._nextItem(this._getItemsByLocation(location));\n    }\n    this._actions.onExpandLastSubmenu($curItem);\n    return;\n  }\n  _clean() {\n    if (this._overlay) {\n      this._overlay.$element().remove();\n      this._overlay = null;\n    }\n    this._detachShowContextMenuEvents(this._getTarget());\n    this._shownSubmenus = [];\n    super._clean();\n  }\n  _initMarkup() {\n    this.$element().addClass(\"dx-has-context-menu\");\n    super._initMarkup();\n  }\n  _render() {\n    super._render();\n    this._renderVisibility(this.option(\"visible\"));\n    this._addWidgetClass();\n  }\n  _isTargetOutOfComponent(relatedTarget) {\n    const isInsideContextMenu = 0 !== $(relatedTarget).closest(\".dx-context-menu\").length;\n    return !isInsideContextMenu;\n  }\n  _focusOutHandler(e) {\n    const {\n      relatedTarget: relatedTarget\n    } = e;\n    if (relatedTarget) {\n      const isTargetOutside = this._isTargetOutOfComponent(relatedTarget);\n      if (isTargetOutside) {\n        this.hide();\n      }\n    }\n    super._focusOutHandler(e);\n  }\n  _renderContentImpl() {\n    this._detachShowContextMenuEvents(this._getTarget());\n    this._attachShowContextMenuEvents();\n  }\n  _attachKeyboardEvents() {\n    !this._keyboardListenerId && this._focusTarget().length && super._attachKeyboardEvents();\n  }\n  _renderContextMenuOverlay() {\n    if (this._overlay) {\n      return;\n    }\n    const overlayOptions = this._getOverlayOptions();\n    this._overlay = this._createComponent($(\"<div>\").appendTo(this._$element), Overlay, overlayOptions);\n    const $overlayContent = this._overlay.$content();\n    $overlayContent.addClass(\"dx-context-menu\");\n    this._addCustomCssClass($overlayContent);\n    this._addPlatformDependentClass($overlayContent);\n    this._attachContextMenuEvent();\n  }\n  preventShowingDefaultContextMenuAboveOverlay() {\n    const $itemContainer = this._itemContainer();\n    const eventName = addNamespace(contextMenuEventName, this.NAME);\n    eventsEngine.off($itemContainer, eventName, \".dx-submenu\");\n    eventsEngine.on($itemContainer, eventName, \".dx-submenu\", e => {\n      e.stopPropagation();\n      e.preventDefault();\n      eventsEngine.off($itemContainer, eventName, \".dx-submenu\");\n    });\n  }\n  _itemContextMenuHandler(e) {\n    super._itemContextMenuHandler(e);\n    e.stopPropagation();\n  }\n  _addPlatformDependentClass($element) {\n    if (devices.current().phone) {\n      $element.addClass(DX_MENU_PHONE_CLASS);\n    }\n  }\n  _detachShowContextMenuEvents(target) {\n    const showEvent = this.getShowEvent(this.option(\"showEvent\"));\n    if (!showEvent) {\n      return;\n    }\n    const eventName = addNamespace(showEvent, this.NAME);\n    if (this._showContextMenuEventHandler) {\n      eventsEngine.off(domAdapter.getDocument(), eventName, target, this._showContextMenuEventHandler);\n    } else {\n      eventsEngine.off($(target), eventName);\n    }\n  }\n  _attachShowContextMenuEvents() {\n    const target = this._getTarget();\n    const showEvent = this.getShowEvent(this.option(\"showEvent\"));\n    if (!showEvent) {\n      return;\n    }\n    const eventName = addNamespace(showEvent, this.NAME);\n    let contextMenuAction = this._createAction(e => {\n      const delay = this.getShowDelay(this.option(\"showEvent\"));\n      if (delay) {\n        setTimeout(() => this._show(e.event), delay);\n      } else {\n        this._show(e.event);\n      }\n    }, {\n      validatingTargetName: \"target\"\n    });\n    const handler = e => contextMenuAction({\n      event: e,\n      target: $(e.currentTarget)\n    });\n    contextMenuAction = this._createAction(contextMenuAction);\n    if (isRenderer(target) || target.nodeType || isWindow(target)) {\n      this._showContextMenuEventHandler = void 0;\n      eventsEngine.on(target, eventName, handler);\n    } else {\n      this._showContextMenuEventHandler = handler;\n      eventsEngine.on(domAdapter.getDocument(), eventName, target, this._showContextMenuEventHandler);\n    }\n  }\n  _hoverEndHandler(e) {\n    super._hoverEndHandler(e);\n    e.stopPropagation();\n  }\n  _renderDimensions() {}\n  _renderContainer($wrapper, submenuContainer) {\n    const $holder = submenuContainer || this._itemContainer();\n    $wrapper = $(\"<div>\");\n    $wrapper.appendTo($holder).addClass(\"dx-submenu\").css(\"visibility\", submenuContainer ? \"hidden\" : \"visible\");\n    if (!$wrapper.parent().hasClass(\"dx-overlay-content\")) {\n      this._addCustomCssClass($wrapper);\n    }\n    const $itemsContainer = super._renderContainer($wrapper);\n    if (submenuContainer) {\n      return $itemsContainer;\n    }\n    if (this.option(\"width\")) {\n      return $itemsContainer.css(\"minWidth\", this.option(\"width\"));\n    }\n    if (this.option(\"height\")) {\n      return $itemsContainer.css(\"minHeight\", this.option(\"height\"));\n    }\n    return $itemsContainer;\n  }\n  _renderSubmenuItems(node, $itemFrame) {\n    this._renderItems(this._getChildNodes(node), $itemFrame);\n    const $submenu = $itemFrame.children(\".dx-submenu\");\n    this._actions.onSubmenuCreated({\n      itemElement: getPublicElement($itemFrame),\n      itemData: node.internalFields.item,\n      submenuElement: getPublicElement($submenu)\n    });\n    this._initScrollable($submenu);\n    this.setAria({\n      role: \"menu\"\n    }, $submenu);\n  }\n  _getOverlayOptions() {\n    const position = this.option(\"position\");\n    const overlayOptions = {\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      animation: this.option(\"animation\"),\n      innerOverlay: true,\n      hideOnOutsideClick: e => this._hideOnOutsideClickHandler(e),\n      propagateOutsideClick: true,\n      hideOnParentScroll: true,\n      deferRendering: false,\n      position: {\n        at: position.at,\n        my: position.my,\n        of: this._getTarget(),\n        collision: \"flipfit\"\n      },\n      shading: false,\n      showTitle: false,\n      height: \"auto\",\n      width: \"auto\",\n      onShown: this._overlayShownActionHandler.bind(this),\n      onHiding: this._overlayHidingActionHandler.bind(this),\n      onHidden: this._overlayHiddenActionHandler.bind(this),\n      visualContainer: window\n    };\n    return overlayOptions;\n  }\n  _overlayShownActionHandler(arg) {\n    this._actions.onShown(arg);\n  }\n  _overlayHidingActionHandler(arg) {\n    this._actions.onHiding(arg);\n    if (!arg.cancel) {\n      this._hideAllShownSubmenus();\n      this._setOptionWithoutOptionChange(\"visible\", false);\n    }\n  }\n  _overlayHiddenActionHandler(arg) {\n    this._actions.onHidden(arg);\n  }\n  _shouldHideOnOutsideClick(e) {\n    const {\n      closeOnOutsideClick: closeOnOutsideClick,\n      hideOnOutsideClick: hideOnOutsideClick\n    } = this.option();\n    if (isFunction(hideOnOutsideClick)) {\n      return hideOnOutsideClick(e);\n    }\n    if (isFunction(closeOnOutsideClick)) {\n      return closeOnOutsideClick(e);\n    }\n    return hideOnOutsideClick || closeOnOutsideClick;\n  }\n  _hideOnOutsideClickHandler(e) {\n    if (!this._shouldHideOnOutsideClick(e)) {\n      return false;\n    }\n    if (domAdapter.isDocument(e.target)) {\n      return true;\n    }\n    const $activeItemContainer = this._getActiveItemsContainer(e.target);\n    const $itemContainers = this._getItemsContainers();\n    const $clickedItem = this._searchActiveItem(e.target);\n    const $rootItem = this.$element().parents(\".dx-menu-item\");\n    const isRootItemClicked = $clickedItem[0] === $rootItem[0] && $clickedItem.length && $rootItem.length;\n    const isInnerOverlayClicked = this._isIncludeOverlay($activeItemContainer, $itemContainers) && $clickedItem.length;\n    if (isInnerOverlayClicked || isRootItemClicked) {\n      if (\"onClick\" === this._getShowSubmenuMode()) {\n        this._hideAllShownChildSubmenus($clickedItem);\n      }\n      return false;\n    }\n    return true;\n  }\n  _getActiveItemsContainer(target) {\n    return $(target).closest(\".dx-menu-items-container\");\n  }\n  _getItemsContainers() {\n    return this._overlay.$content().find(\".dx-menu-items-container\");\n  }\n  _searchActiveItem(target) {\n    return $(target).closest(\".dx-menu-item\").eq(0);\n  }\n  _isIncludeOverlay($activeOverlay, $allOverlays) {\n    let isSame = false;\n    each($allOverlays, (index, $overlay) => {\n      if ($activeOverlay.is($overlay) && !isSame) {\n        isSame = true;\n      }\n    });\n    return isSame;\n  }\n  _hideAllShownChildSubmenus($clickedItem) {\n    const $submenuElements = $clickedItem.find(\".dx-submenu\");\n    const shownSubmenus = extend([], this._shownSubmenus);\n    if ($submenuElements.length > 0) {\n      each(shownSubmenus, (index, $submenu) => {\n        const $context = this._searchActiveItem($submenu.context).parent();\n        if ($context.parent().is($clickedItem.parent().parent()) && !$context.is($clickedItem.parent())) {\n          this._hideSubmenu($submenu);\n        }\n      });\n    }\n  }\n  _initScrollable($container) {\n    this._createComponent($container, Scrollable, {\n      useKeyboard: false,\n      _onVisibilityChanged: scrollable => {\n        scrollable.scrollTo(0);\n      }\n    });\n  }\n  _setSubMenuHeight($submenu, anchor, isNestedSubmenu) {\n    const $itemsContainer = $submenu.find(\".dx-menu-items-container\");\n    const contentHeight = getOuterHeight($itemsContainer);\n    const maxHeight = this._getMaxHeight(anchor, !isNestedSubmenu);\n    const menuHeight = Math.min(contentHeight, maxHeight);\n    $submenu.css(\"height\", isNestedSubmenu ? menuHeight : \"100%\");\n  }\n  _getMaxHeight(anchor) {\n    let considerAnchorHeight = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : true;\n    const windowHeight = getOuterHeight(window);\n    const isAnchorRenderer = isRenderer(anchor);\n    const document = domAdapter.getDocument();\n    const isAnchorDocument = anchor.length && anchor[0] === document;\n    if (!isAnchorRenderer || isAnchorDocument) {\n      return windowHeight;\n    }\n    const offsetTop = anchor[0].getBoundingClientRect().top;\n    const anchorHeight = getOuterHeight(anchor);\n    const availableHeight = considerAnchorHeight ? Math.max(offsetTop, windowHeight - offsetTop - anchorHeight) : Math.max(offsetTop + anchorHeight, windowHeight - offsetTop);\n    return availableHeight - 10;\n  }\n  _dimensionChanged() {\n    if (!this._shownSubmenus) {\n      return;\n    }\n    this._shownSubmenus.forEach($submenu => {\n      const $item = $submenu.closest(\".dx-menu-item\");\n      this._setSubMenuHeight($submenu, $item, true);\n      this._scrollToElement($item);\n      const submenuPosition = this._getSubmenuPosition($item);\n      animationPosition.setup($submenu, submenuPosition);\n    });\n  }\n  _getSubmenuBorderWidth() {\n    return isGeneric(currentTheme()) ? 1 : 0;\n  }\n  _showSubmenu($item) {\n    const node = this._dataAdapter.getNodeByItem(this._getItemData($item));\n    this._hideSubmenusOnSameLevel($item);\n    if (!this._hasSubmenu(node)) {\n      return;\n    }\n    let $submenu = $item.children(\".dx-submenu\");\n    const isSubmenuRendered = $submenu.length;\n    super._showSubmenu($item);\n    if (!isSubmenuRendered) {\n      this._renderSubmenuItems(node, $item);\n      $submenu = $item.children(\".dx-submenu\");\n    }\n    this._planPostRenderActions($submenu);\n  }\n  _setSubmenuVisible($submenu) {\n    if (!$submenu) {\n      return;\n    }\n    const $item = null === $submenu || void 0 === $submenu ? void 0 : $submenu.closest(\".dx-menu-item\");\n    this._setSubMenuHeight($submenu, $item, true);\n    if (!this._isSubmenuVisible($submenu) && $item) {\n      this._drawSubmenu($item);\n    }\n  }\n  _hideSubmenusOnSameLevel($item) {\n    const $expandedItems = $item.parent(\".dx-menu-item-wrapper\").siblings().find(\".dx-menu-item-expanded\");\n    if ($expandedItems.length) {\n      $expandedItems.removeClass(\"dx-menu-item-expanded\");\n      this._hideSubmenu($expandedItems.find(\".dx-submenu\"));\n    }\n  }\n  _hideSubmenuGroup($submenu) {\n    if (this._isSubmenuVisible($submenu)) {\n      this._hideSubmenuCore($submenu);\n    }\n  }\n  _isSubmenuVisible($submenu) {\n    return \"visible\" === $submenu.css(\"visibility\");\n  }\n  _drawSubmenu($itemElement) {\n    const animation = this.option(\"animation\") ? this.option(\"animation\").show : {};\n    const $submenu = $itemElement.children(\".dx-submenu\");\n    const submenuPosition = this._getSubmenuPosition($itemElement);\n    if (this._overlay && this._overlay.option(\"visible\")) {\n      if (!isDefined(this._shownSubmenus)) {\n        this._shownSubmenus = [];\n      }\n      if (!this._shownSubmenus.includes($submenu)) {\n        this._shownSubmenus.push($submenu);\n      }\n      if (animation) {\n        fx.stop($submenu);\n      }\n      animationPosition.setup($submenu, submenuPosition);\n      if (animation) {\n        if (isPlainObject(animation.to)) {\n          animation.to.position = submenuPosition;\n        }\n        this._animate($submenu, animation);\n      }\n      $submenu.css(\"visibility\", \"visible\");\n    }\n  }\n  _animate($container, options) {\n    fx.animate($container, options);\n  }\n  _getSubmenuPosition($rootItem) {\n    const submenuDirection = this.option(\"submenuDirection\").toLowerCase();\n    const $rootItemWrapper = $rootItem.parent(\".dx-menu-item-wrapper\");\n    const position = {\n      collision: \"flip\",\n      of: $rootItemWrapper,\n      offset: {\n        h: 0,\n        v: -1\n      }\n    };\n    switch (submenuDirection) {\n      case \"left\":\n        position.at = \"left top\";\n        position.my = \"right top\";\n        break;\n      case \"right\":\n        position.at = \"right top\";\n        position.my = \"left top\";\n        break;\n      default:\n        if (this.option(\"rtlEnabled\")) {\n          position.at = \"left top\";\n          position.my = \"right top\";\n        } else {\n          position.at = \"right top\";\n          position.my = \"left top\";\n        }\n    }\n    return position;\n  }\n  _updateSubmenuVisibilityOnClick(actionArgs) {\n    if (!actionArgs.args.length) {\n      return;\n    }\n    const {\n      itemData: itemData\n    } = actionArgs.args[0];\n    const node = this._dataAdapter.getNodeByItem(itemData);\n    if (!node) {\n      return;\n    }\n    const $itemElement = $(actionArgs.args[0].itemElement);\n    let $submenu = $itemElement.find(\".dx-submenu\");\n    const shouldRenderSubmenu = this._hasSubmenu(node) && !$submenu.length;\n    if (shouldRenderSubmenu) {\n      this._renderSubmenuItems(node, $itemElement);\n      $submenu = $itemElement.find(\".dx-submenu\");\n    }\n    if ($itemElement.context === $submenu.context && \"visible\" === $submenu.css(\"visibility\")) {\n      return;\n    }\n    this._updateSelectedItemOnClick(actionArgs);\n    const notCloseMenuOnItemClick = itemData && false === itemData.closeMenuOnClick;\n    if (!itemData || itemData.disabled || notCloseMenuOnItemClick) {\n      return;\n    }\n    if (0 === $submenu.length) {\n      const $prevSubmenu = $($itemElement.parents(\".dx-submenu\")[0]);\n      this._hideSubmenu($prevSubmenu);\n      if (!actionArgs.canceled && this._overlay && this._overlay.option(\"visible\")) {\n        this.option(\"visible\", false);\n      }\n    } else {\n      if (this._shownSubmenus && this._shownSubmenus.length > 0) {\n        if (this._shownSubmenus[0].is($submenu)) {\n          this._hideSubmenu($submenu);\n        }\n      }\n      this._showSubmenu($itemElement);\n    }\n  }\n  _hideSubmenu($curSubmenu) {\n    const shownSubmenus = extend([], this._shownSubmenus);\n    each(shownSubmenus, (index, $submenu) => {\n      if ($curSubmenu.is($submenu) || contains($curSubmenu[0], $submenu[0])) {\n        $submenu.parent().removeClass(\"dx-menu-item-expanded\");\n        this._hideSubmenuCore($submenu);\n      }\n    });\n  }\n  _hideSubmenuCore($submenu) {\n    const index = this._shownSubmenus.indexOf($submenu);\n    const animation = this.option(\"animation\") ? this.option(\"animation\").hide : null;\n    if (index >= 0) {\n      this._shownSubmenus.splice(index, 1);\n    }\n    this._stopAnimate($submenu);\n    animation && this._animate($submenu, animation);\n    $submenu.css(\"visibility\", \"hidden\");\n    const scrollableInstance = $submenu.dxScrollable(\"instance\");\n    scrollableInstance.scrollTo(0);\n    this.option(\"focusedElement\", null);\n  }\n  _stopAnimate($container) {\n    fx.stop($container, true);\n  }\n  _hideAllShownSubmenus() {\n    const shownSubmenus = extend([], this._shownSubmenus);\n    const $expandedItems = this._overlay.$content().find(\".dx-menu-item-expanded\");\n    $expandedItems.removeClass(\"dx-menu-item-expanded\");\n    each(shownSubmenus, (_, $submenu) => {\n      this._hideSubmenu($submenu);\n    });\n  }\n  _visibilityChanged(visible) {\n    if (visible) {\n      this._renderContentImpl();\n    }\n  }\n  _optionChanged(args) {\n    if (ACTIONS.includes(args.name)) {\n      this._initActions();\n      return;\n    }\n    switch (args.name) {\n      case \"visible\":\n        this._renderVisibility(args.value);\n        break;\n      case \"showEvent\":\n      case \"position\":\n      case \"submenuDirection\":\n        this._invalidate();\n        break;\n      case \"target\":\n        args.previousValue && this._detachShowContextMenuEvents(args.previousValue);\n        this._invalidate();\n        break;\n      case \"closeOnOutsideClick\":\n      case \"hideOnOutsideClick\":\n        break;\n      default:\n        super._optionChanged(args);\n    }\n  }\n  _renderVisibility(showing) {\n    return showing ? this._show() : this._hide();\n  }\n  _toggleVisibility() {}\n  _show(event) {\n    const args = {\n      jQEvent: event\n    };\n    let promise = Deferred().reject().promise();\n    this._actions.onShowing(args);\n    if (args.cancel) {\n      return promise;\n    }\n    const position = this._positionContextMenu(event);\n    if (position) {\n      var _event$originalEvent;\n      if (!this._overlay) {\n        this._renderContextMenuOverlay();\n        this._overlay.$content().addClass(this._widgetClass());\n        this._renderFocusState();\n        this._attachHoverEvents();\n        this._attachClickEvent();\n        this._renderItems(this._dataAdapter.getRootNodes());\n      }\n      const $subMenu = $(this._overlay.content()).children(\".dx-submenu\");\n      this._setOptionWithoutOptionChange(\"visible\", true);\n      this._overlay.option({\n        height: () => this._getMaxHeight(position.of),\n        maxHeight: () => {\n          const $content = $subMenu.find(\".dx-menu-items-container\");\n          const borderWidth = this._getSubmenuBorderWidth();\n          return getOuterHeight($content) + 2 * borderWidth;\n        },\n        position: position\n      });\n      if ($subMenu.length) {\n        this._setSubMenuHeight($subMenu, position.of, false);\n      }\n      promise = this._overlay.show();\n      event && event.stopPropagation();\n      this._setAriaAttributes();\n      if ((null === event || void 0 === event || null === (_event$originalEvent = event.originalEvent) || void 0 === _event$originalEvent ? void 0 : _event$originalEvent.type) === holdEvent.name) {\n        this.preventShowingDefaultContextMenuAboveOverlay();\n      }\n    }\n    return promise;\n  }\n  _renderItems(nodes, submenuContainer) {\n    super._renderItems(nodes, submenuContainer);\n    const $submenu = $(this._overlay.content()).children(\".dx-submenu\");\n    if ($submenu.length) {\n      this._initScrollable($submenu);\n    }\n  }\n  _setAriaAttributes() {\n    this._overlayContentId = `dx-${new Guid()}`;\n    this.setAria(\"owns\", this._overlayContentId);\n    this.setAria({\n      id: this._overlayContentId,\n      role: \"menu\"\n    }, this._overlay.$content());\n  }\n  _cleanAriaAttributes() {\n    this._overlay && this.setAria(\"id\", null, this._overlay.$content());\n    this.setAria(\"owns\", void 0);\n  }\n  _getTarget() {\n    return this.option(\"target\") || this.option(\"position\").of || $(domAdapter.getDocument());\n  }\n  _getContextMenuPosition() {\n    return extend({}, this.option(\"position\"), {\n      of: this._getTarget()\n    });\n  }\n  _positionContextMenu(jQEvent) {\n    let position = this._getContextMenuPosition();\n    const isInitialPosition = this._isInitialOptionValue(\"position\");\n    const positioningAction = this._createActionByOption(\"onPositioning\");\n    if (jQEvent && jQEvent.preventDefault && isInitialPosition) {\n      position.of = jQEvent;\n    }\n    const actionArgs = {\n      position: position,\n      event: jQEvent\n    };\n    positioningAction(actionArgs);\n    if (actionArgs.cancel) {\n      position = null;\n    } else if (actionArgs.event) {\n      actionArgs.event.cancel = true;\n      jQEvent.preventDefault();\n    }\n    return position;\n  }\n  _refresh() {\n    if (!hasWindow()) {\n      super._refresh();\n    } else if (this._overlay) {\n      const lastPosition = this._overlay.option(\"position\");\n      super._refresh();\n      this._overlay && this._overlay.option(\"position\", lastPosition);\n    } else {\n      super._refresh();\n    }\n  }\n  _hide() {\n    let promise;\n    if (this._overlay) {\n      promise = this._overlay.hide();\n      this._setOptionWithoutOptionChange(\"visible\", false);\n    }\n    this._cleanAriaAttributes();\n    this.option(\"focusedElement\", null);\n    return promise || Deferred().reject().promise();\n  }\n  toggle(showing) {\n    const visible = this.option(\"visible\");\n    showing = void 0 === showing ? !visible : showing;\n    return this._renderVisibility(showing);\n  }\n  show() {\n    return this.toggle(true);\n  }\n  hide() {\n    return this.toggle(false);\n  }\n  _postProcessRenderItems($submenu) {\n    this._setSubmenuVisible($submenu);\n  }\n}\nregisterComponent(\"dxContextMenu\", ContextMenu);\nexport default ContextMenu;","map":{"version":3,"names":["fx","animationPosition","name","contextMenuEventName","eventsEngine","holdEvent","addNamespace","registerComponent","devices","domAdapter","getPublicElement","Guid","$","noop","Deferred","contains","extend","each","getOuterHeight","isDefined","isFunction","isObject","isPlainObject","isRenderer","isWindow","getWindow","hasWindow","Overlay","Scrollable","current","currentTheme","isGeneric","MenuBase","DX_MENU_CLASS","DX_MENU_ITEM_CLASS","DX_MENU_ITEM_EXPANDED_CLASS","DX_MENU_PHONE_CLASS","DX_MENU_ITEMS_CONTAINER_CLASS","DX_MENU_ITEM_WRAPPER_CLASS","DX_SUBMENU_CLASS","DX_CONTEXT_MENU_CLASS","DX_HAS_CONTEXT_MENU_CLASS","DX_STATE_DISABLED_CLASS","DX_STATE_FOCUSED_CLASS","DX_STATE_HOVER_CLASS","OVERLAY_CONTENT_CLASS","SCROLLABLE_CLASS","FOCUS_UP","FOCUS_DOWN","FOCUS_LEFT","FOCUS_RIGHT","FOCUS_FIRST","FOCUS_LAST","ACTIONS","LOCAL_SUBMENU_DIRECTIONS","DEFAULT_SHOW_EVENT","SUBMENU_PADDING","BORDER_WIDTH","window","ContextMenu","getShowEvent","showEventOption","getShowDelay","delay","_getDefaultOptions","showEvent","hideOnOutsideClick","position","at","my","onShowing","onShown","onSubmenuCreated","onHiding","onHidden","onPositioning","submenuDirection","visible","target","onLeftFirstItem","onLeftLastItem","onCloseRootSubmenu","onExpandLastSubmenu","_defaultOptionsRules","concat","device","options","animation","_setDeprecatedOptions","_deprecatedOptions","closeOnOutsideClick","since","alias","_initActions","_actions","index","action","_createActionByOption","_setOptionsByReference","_optionsByReference","selectedItem","_focusInHandler","_itemContainer","_overlay","$content","_eventBindingTarget","itemsContainer","_supportedKeys","space","$item","option","hide","length","_isSelectionEnabled","selectItem","escape","_getActiveItem","last","$availableItems","_getAvailableItems","$focusedItem","filter","$hoveredItem","$hoveredItemContainer","closest","find","_moveFocus","location","$items","_getItemsByLocation","$oldTarget","$activeItemHighlighted","$newTarget","_prevItem","_setFocusedElement","is","first","_nextItem","_hideSubmenuHandler","_expandSubmenuHandler","$element","_scrollToElement","$scrollableElement","scrollableInstance","dxScrollable","scrollToElement","$activeItem","includes","children","_getAriaTarget","_refreshActiveDescendant","$target","$curItem","$parentItem","parents","_hideSubmenusOnSameLevel","_hideSubmenu","itemData","_getItemData","node","_dataAdapter","getNodeByItem","isItemHasSubmenu","_hasSubmenu","$submenu","hasClass","css","_showSubmenu","_clean","remove","_detachShowContextMenuEvents","_getTarget","_shownSubmenus","_initMarkup","addClass","_render","_renderVisibility","_addWidgetClass","_isTargetOutOfComponent","relatedTarget","isInsideContextMenu","_focusOutHandler","e","isTargetOutside","_renderContentImpl","_attachShowContextMenuEvents","_attachKeyboardEvents","_keyboardListenerId","_focusTarget","_renderContextMenuOverlay","overlayOptions","_getOverlayOptions","_createComponent","appendTo","_$element","$overlayContent","_addCustomCssClass","_addPlatformDependentClass","_attachContextMenuEvent","preventShowingDefaultContextMenuAboveOverlay","$itemContainer","eventName","NAME","off","on","stopPropagation","preventDefault","_itemContextMenuHandler","phone","_showContextMenuEventHandler","getDocument","contextMenuAction","_createAction","setTimeout","_show","event","validatingTargetName","handler","currentTarget","nodeType","_hoverEndHandler","_renderDimensions","_renderContainer","$wrapper","submenuContainer","$holder","parent","$itemsContainer","_renderSubmenuItems","$itemFrame","_renderItems","_getChildNodes","itemElement","internalFields","item","submenuElement","_initScrollable","setAria","role","focusStateEnabled","innerOverlay","_hideOnOutsideClickHandler","propagateOutsideClick","hideOnParentScroll","deferRendering","of","collision","shading","showTitle","height","width","_overlayShownActionHandler","bind","_overlayHidingActionHandler","_overlayHiddenActionHandler","visualContainer","arg","cancel","_hideAllShownSubmenus","_setOptionWithoutOptionChange","_shouldHideOnOutsideClick","isDocument","$activeItemContainer","_getActiveItemsContainer","$itemContainers","_getItemsContainers","$clickedItem","_searchActiveItem","$rootItem","isRootItemClicked","isInnerOverlayClicked","_isIncludeOverlay","_getShowSubmenuMode","_hideAllShownChildSubmenus","eq","$activeOverlay","$allOverlays","isSame","$overlay","$submenuElements","shownSubmenus","$context","context","$container","useKeyboard","_onVisibilityChanged","scrollable","scrollTo","_setSubMenuHeight","anchor","isNestedSubmenu","contentHeight","maxHeight","_getMaxHeight","menuHeight","Math","min","considerAnchorHeight","arguments","windowHeight","isAnchorRenderer","document","isAnchorDocument","offsetTop","getBoundingClientRect","top","anchorHeight","availableHeight","max","_dimensionChanged","forEach","submenuPosition","_getSubmenuPosition","setup","_getSubmenuBorderWidth","isSubmenuRendered","_planPostRenderActions","_setSubmenuVisible","_isSubmenuVisible","_drawSubmenu","$expandedItems","siblings","removeClass","_hideSubmenuGroup","_hideSubmenuCore","$itemElement","show","push","stop","to","_animate","animate","toLowerCase","$rootItemWrapper","offset","h","v","_updateSubmenuVisibilityOnClick","actionArgs","args","shouldRenderSubmenu","_updateSelectedItemOnClick","notCloseMenuOnItemClick","closeMenuOnClick","disabled","$prevSubmenu","canceled","$curSubmenu","indexOf","splice","_stopAnimate","_","_visibilityChanged","_optionChanged","value","_invalidate","previousValue","showing","_hide","_toggleVisibility","jQEvent","promise","reject","_positionContextMenu","_event$originalEvent","_widgetClass","_renderFocusState","_attachHoverEvents","_attachClickEvent","getRootNodes","$subMenu","content","borderWidth","_setAriaAttributes","originalEvent","type","nodes","_overlayContentId","id","_cleanAriaAttributes","_getContextMenuPosition","isInitialPosition","_isInitialOptionValue","positioningAction","_refresh","lastPosition","toggle","_postProcessRenderItems"],"sources":["C:/Users/Sofia/Desktop/Репозиторий ЦК/internship_project/client/node_modules/devextreme/esm/__internal/ui/context_menu/m_context_menu.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/__internal/ui/context_menu/m_context_menu.js)\r\n * Version: 24.2.7\r\n * Build date: Mon Apr 28 2025\r\n *\r\n * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    fx\r\n} from \"../../../common/core/animation\";\r\nimport animationPosition from \"../../../common/core/animation/position\";\r\nimport {\r\n    name as contextMenuEventName\r\n} from \"../../../common/core/events/contextmenu\";\r\nimport eventsEngine from \"../../../common/core/events/core/events_engine\";\r\nimport holdEvent from \"../../../common/core/events/hold\";\r\nimport {\r\n    addNamespace\r\n} from \"../../../common/core/events/utils/index\";\r\nimport registerComponent from \"../../../core/component_registrator\";\r\nimport devices from \"../../../core/devices\";\r\nimport domAdapter from \"../../../core/dom_adapter\";\r\nimport {\r\n    getPublicElement\r\n} from \"../../../core/element\";\r\nimport Guid from \"../../../core/guid\";\r\nimport $ from \"../../../core/renderer\";\r\nimport {\r\n    noop\r\n} from \"../../../core/utils/common\";\r\nimport {\r\n    Deferred\r\n} from \"../../../core/utils/deferred\";\r\nimport {\r\n    contains\r\n} from \"../../../core/utils/dom\";\r\nimport {\r\n    extend\r\n} from \"../../../core/utils/extend\";\r\nimport {\r\n    each\r\n} from \"../../../core/utils/iterator\";\r\nimport {\r\n    getOuterHeight\r\n} from \"../../../core/utils/size\";\r\nimport {\r\n    isDefined,\r\n    isFunction,\r\n    isObject,\r\n    isPlainObject,\r\n    isRenderer,\r\n    isWindow\r\n} from \"../../../core/utils/type\";\r\nimport {\r\n    getWindow,\r\n    hasWindow\r\n} from \"../../../core/utils/window\";\r\nimport Overlay from \"../../../ui/overlay/ui.overlay\";\r\nimport Scrollable from \"../../../ui/scroll_view/ui.scrollable\";\r\nimport {\r\n    current as currentTheme,\r\n    isGeneric\r\n} from \"../../../ui/themes\";\r\nimport MenuBase from \"../../ui/context_menu/m_menu_base\";\r\nconst DX_MENU_CLASS = \"dx-menu\";\r\nconst DX_MENU_ITEM_CLASS = \"dx-menu-item\";\r\nconst DX_MENU_ITEM_EXPANDED_CLASS = \"dx-menu-item-expanded\";\r\nconst DX_MENU_PHONE_CLASS = \"dx-menu-phone-overlay\";\r\nconst DX_MENU_ITEMS_CONTAINER_CLASS = \"dx-menu-items-container\";\r\nconst DX_MENU_ITEM_WRAPPER_CLASS = \"dx-menu-item-wrapper\";\r\nconst DX_SUBMENU_CLASS = \"dx-submenu\";\r\nconst DX_CONTEXT_MENU_CLASS = \"dx-context-menu\";\r\nconst DX_HAS_CONTEXT_MENU_CLASS = \"dx-has-context-menu\";\r\nconst DX_STATE_DISABLED_CLASS = \"dx-state-disabled\";\r\nconst DX_STATE_FOCUSED_CLASS = \"dx-state-focused\";\r\nconst DX_STATE_HOVER_CLASS = \"dx-state-hover\";\r\nconst OVERLAY_CONTENT_CLASS = \"dx-overlay-content\";\r\nconst SCROLLABLE_CLASS = \"dx-scrollable\";\r\nconst FOCUS_UP = \"up\";\r\nconst FOCUS_DOWN = \"down\";\r\nconst FOCUS_LEFT = \"left\";\r\nconst FOCUS_RIGHT = \"right\";\r\nconst FOCUS_FIRST = \"first\";\r\nconst FOCUS_LAST = \"last\";\r\nconst ACTIONS = [\"onShowing\", \"onShown\", \"onSubmenuCreated\", \"onHiding\", \"onHidden\", \"onPositioning\", \"onLeftFirstItem\", \"onLeftLastItem\", \"onCloseRootSubmenu\", \"onExpandLastSubmenu\"];\r\nconst LOCAL_SUBMENU_DIRECTIONS = [\"up\", \"down\", \"first\", \"last\"];\r\nconst DEFAULT_SHOW_EVENT = \"dxcontextmenu\";\r\nconst SUBMENU_PADDING = 10;\r\nconst BORDER_WIDTH = 1;\r\nconst window = getWindow();\r\nclass ContextMenu extends MenuBase {\r\n    getShowEvent(showEventOption) {\r\n        if (isObject(showEventOption)) {\r\n            if (null !== showEventOption.name) {\r\n                return showEventOption.name ?? \"dxcontextmenu\"\r\n            }\r\n        } else {\r\n            return showEventOption\r\n        }\r\n        return null\r\n    }\r\n    getShowDelay(showEventOption) {\r\n        return isObject(showEventOption) && showEventOption.delay\r\n    }\r\n    _getDefaultOptions() {\r\n        return extend(super._getDefaultOptions(), {\r\n            showEvent: \"dxcontextmenu\",\r\n            hideOnOutsideClick: true,\r\n            position: {\r\n                at: \"top left\",\r\n                my: \"top left\"\r\n            },\r\n            onShowing: null,\r\n            onShown: null,\r\n            onSubmenuCreated: null,\r\n            onHiding: null,\r\n            onHidden: null,\r\n            onPositioning: null,\r\n            submenuDirection: \"auto\",\r\n            visible: false,\r\n            target: void 0,\r\n            onLeftFirstItem: null,\r\n            onLeftLastItem: null,\r\n            onCloseRootSubmenu: null,\r\n            onExpandLastSubmenu: null\r\n        })\r\n    }\r\n    _defaultOptionsRules() {\r\n        return super._defaultOptionsRules().concat([{\r\n            device: () => !hasWindow(),\r\n            options: {\r\n                animation: null\r\n            }\r\n        }])\r\n    }\r\n    _setDeprecatedOptions() {\r\n        super._setDeprecatedOptions();\r\n        extend(this._deprecatedOptions, {\r\n            closeOnOutsideClick: {\r\n                since: \"22.2\",\r\n                alias: \"hideOnOutsideClick\"\r\n            }\r\n        })\r\n    }\r\n    _initActions() {\r\n        this._actions = {};\r\n        each(ACTIONS, ((index, action) => {\r\n            this._actions[action] = this._createActionByOption(action) || noop\r\n        }))\r\n    }\r\n    _setOptionsByReference() {\r\n        super._setOptionsByReference();\r\n        extend(this._optionsByReference, {\r\n            animation: true,\r\n            selectedItem: true\r\n        })\r\n    }\r\n    _focusInHandler() {}\r\n    _itemContainer() {\r\n        return this._overlay ? this._overlay.$content() : $()\r\n    }\r\n    _eventBindingTarget() {\r\n        return this._itemContainer()\r\n    }\r\n    itemsContainer() {\r\n        return this._overlay ? this._overlay.$content() : void 0\r\n    }\r\n    _supportedKeys() {\r\n        return extend(super._supportedKeys(), {\r\n            space: () => {\r\n                const $item = $(this.option(\"focusedElement\"));\r\n                this.hide();\r\n                if (!$item.length || !this._isSelectionEnabled()) {\r\n                    return\r\n                }\r\n                this.selectItem($item[0])\r\n            },\r\n            escape: this.hide\r\n        })\r\n    }\r\n    _getActiveItem(last) {\r\n        const $availableItems = this._getAvailableItems();\r\n        const $focusedItem = $availableItems.filter(\".dx-state-focused\");\r\n        const $hoveredItem = $availableItems.filter(\".dx-state-hover\");\r\n        const $hoveredItemContainer = $hoveredItem.closest(\".dx-menu-items-container\");\r\n        if ($hoveredItemContainer.find(\".dx-menu-item\").index($focusedItem) >= 0) {\r\n            return $focusedItem\r\n        }\r\n        if ($hoveredItem.length) {\r\n            return $hoveredItem\r\n        }\r\n        return super._getActiveItem()\r\n    }\r\n    _moveFocus(location) {\r\n        const $items = this._getItemsByLocation(location);\r\n        const $oldTarget = this._getActiveItem(true);\r\n        const $hoveredItem = this.itemsContainer().find(\".dx-state-hover\");\r\n        const $focusedItem = $(this.option(\"focusedElement\"));\r\n        const $activeItemHighlighted = !!($focusedItem.length || $hoveredItem.length);\r\n        let $newTarget;\r\n        switch (location) {\r\n            case \"up\":\r\n                $newTarget = $activeItemHighlighted ? this._prevItem($items) : $oldTarget;\r\n                this._setFocusedElement($newTarget);\r\n                if ($oldTarget.is($items.first())) {\r\n                    this._actions.onLeftFirstItem($oldTarget)\r\n                }\r\n                break;\r\n            case \"down\":\r\n                $newTarget = $activeItemHighlighted ? this._nextItem($items) : $oldTarget;\r\n                this._setFocusedElement($newTarget);\r\n                if ($oldTarget.is($items.last())) {\r\n                    this._actions.onLeftLastItem($oldTarget)\r\n                }\r\n                break;\r\n            case \"right\":\r\n                $newTarget = this.option(\"rtlEnabled\") ? this._hideSubmenuHandler() : this._expandSubmenuHandler($items, location);\r\n                this._setFocusedElement($newTarget);\r\n                break;\r\n            case \"left\":\r\n                $newTarget = this.option(\"rtlEnabled\") ? this._expandSubmenuHandler($items, location) : this._hideSubmenuHandler();\r\n                this._setFocusedElement($newTarget);\r\n                break;\r\n            case \"first\":\r\n                $newTarget = $items.first();\r\n                this._setFocusedElement($newTarget);\r\n                break;\r\n            case \"last\":\r\n                $newTarget = $items.last();\r\n                this._setFocusedElement($newTarget);\r\n                break;\r\n            default:\r\n                return super._moveFocus(location)\r\n        }\r\n    }\r\n    _setFocusedElement($element) {\r\n        if ($element && 0 !== $element.length) {\r\n            this.option(\"focusedElement\", getPublicElement($element));\r\n            this._scrollToElement($element)\r\n        }\r\n    }\r\n    _scrollToElement($element) {\r\n        const $scrollableElement = $element.closest(\".dx-scrollable\");\r\n        const scrollableInstance = $scrollableElement.dxScrollable(\"instance\");\r\n        null === scrollableInstance || void 0 === scrollableInstance || scrollableInstance.scrollToElement($element)\r\n    }\r\n    _getItemsByLocation(location) {\r\n        const $activeItem = this._getActiveItem(true);\r\n        let $items;\r\n        if (LOCAL_SUBMENU_DIRECTIONS.includes(location)) {\r\n            $items = $activeItem.closest(\".dx-menu-items-container\").children().children()\r\n        }\r\n        $items = this._getAvailableItems($items);\r\n        return $items\r\n    }\r\n    _getAriaTarget() {\r\n        return this.$element()\r\n    }\r\n    _refreshActiveDescendant() {\r\n        if (isDefined(this._overlay)) {\r\n            const $target = this._overlay.$content();\r\n            super._refreshActiveDescendant($target)\r\n        }\r\n    }\r\n    _hideSubmenuHandler() {\r\n        const $curItem = this._getActiveItem(true);\r\n        const $parentItem = $curItem.parents(\".dx-menu-item-expanded\").first();\r\n        if ($parentItem.length) {\r\n            this._hideSubmenusOnSameLevel($parentItem);\r\n            this._hideSubmenu($curItem.closest(\".dx-submenu\"));\r\n            return $parentItem\r\n        }\r\n        this._actions.onCloseRootSubmenu($curItem)\r\n    }\r\n    _expandSubmenuHandler($items, location) {\r\n        const $curItem = this._getActiveItem(true);\r\n        const itemData = this._getItemData($curItem);\r\n        const node = this._dataAdapter.getNodeByItem(itemData);\r\n        const isItemHasSubmenu = this._hasSubmenu(node);\r\n        const $submenu = $curItem.children(\".dx-submenu\");\r\n        if (isItemHasSubmenu && !$curItem.hasClass(\"dx-state-disabled\")) {\r\n            if (!$submenu.length || \"hidden\" === $submenu.css(\"visibility\")) {\r\n                this._showSubmenu($curItem)\r\n            }\r\n            return this._nextItem(this._getItemsByLocation(location))\r\n        }\r\n        this._actions.onExpandLastSubmenu($curItem);\r\n        return\r\n    }\r\n    _clean() {\r\n        if (this._overlay) {\r\n            this._overlay.$element().remove();\r\n            this._overlay = null\r\n        }\r\n        this._detachShowContextMenuEvents(this._getTarget());\r\n        this._shownSubmenus = [];\r\n        super._clean()\r\n    }\r\n    _initMarkup() {\r\n        this.$element().addClass(\"dx-has-context-menu\");\r\n        super._initMarkup()\r\n    }\r\n    _render() {\r\n        super._render();\r\n        this._renderVisibility(this.option(\"visible\"));\r\n        this._addWidgetClass()\r\n    }\r\n    _isTargetOutOfComponent(relatedTarget) {\r\n        const isInsideContextMenu = 0 !== $(relatedTarget).closest(\".dx-context-menu\").length;\r\n        return !isInsideContextMenu\r\n    }\r\n    _focusOutHandler(e) {\r\n        const {\r\n            relatedTarget: relatedTarget\r\n        } = e;\r\n        if (relatedTarget) {\r\n            const isTargetOutside = this._isTargetOutOfComponent(relatedTarget);\r\n            if (isTargetOutside) {\r\n                this.hide()\r\n            }\r\n        }\r\n        super._focusOutHandler(e)\r\n    }\r\n    _renderContentImpl() {\r\n        this._detachShowContextMenuEvents(this._getTarget());\r\n        this._attachShowContextMenuEvents()\r\n    }\r\n    _attachKeyboardEvents() {\r\n        !this._keyboardListenerId && this._focusTarget().length && super._attachKeyboardEvents()\r\n    }\r\n    _renderContextMenuOverlay() {\r\n        if (this._overlay) {\r\n            return\r\n        }\r\n        const overlayOptions = this._getOverlayOptions();\r\n        this._overlay = this._createComponent($(\"<div>\").appendTo(this._$element), Overlay, overlayOptions);\r\n        const $overlayContent = this._overlay.$content();\r\n        $overlayContent.addClass(\"dx-context-menu\");\r\n        this._addCustomCssClass($overlayContent);\r\n        this._addPlatformDependentClass($overlayContent);\r\n        this._attachContextMenuEvent()\r\n    }\r\n    preventShowingDefaultContextMenuAboveOverlay() {\r\n        const $itemContainer = this._itemContainer();\r\n        const eventName = addNamespace(contextMenuEventName, this.NAME);\r\n        eventsEngine.off($itemContainer, eventName, \".dx-submenu\");\r\n        eventsEngine.on($itemContainer, eventName, \".dx-submenu\", (e => {\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n            eventsEngine.off($itemContainer, eventName, \".dx-submenu\")\r\n        }))\r\n    }\r\n    _itemContextMenuHandler(e) {\r\n        super._itemContextMenuHandler(e);\r\n        e.stopPropagation()\r\n    }\r\n    _addPlatformDependentClass($element) {\r\n        if (devices.current().phone) {\r\n            $element.addClass(DX_MENU_PHONE_CLASS)\r\n        }\r\n    }\r\n    _detachShowContextMenuEvents(target) {\r\n        const showEvent = this.getShowEvent(this.option(\"showEvent\"));\r\n        if (!showEvent) {\r\n            return\r\n        }\r\n        const eventName = addNamespace(showEvent, this.NAME);\r\n        if (this._showContextMenuEventHandler) {\r\n            eventsEngine.off(domAdapter.getDocument(), eventName, target, this._showContextMenuEventHandler)\r\n        } else {\r\n            eventsEngine.off($(target), eventName)\r\n        }\r\n    }\r\n    _attachShowContextMenuEvents() {\r\n        const target = this._getTarget();\r\n        const showEvent = this.getShowEvent(this.option(\"showEvent\"));\r\n        if (!showEvent) {\r\n            return\r\n        }\r\n        const eventName = addNamespace(showEvent, this.NAME);\r\n        let contextMenuAction = this._createAction((e => {\r\n            const delay = this.getShowDelay(this.option(\"showEvent\"));\r\n            if (delay) {\r\n                setTimeout((() => this._show(e.event)), delay)\r\n            } else {\r\n                this._show(e.event)\r\n            }\r\n        }), {\r\n            validatingTargetName: \"target\"\r\n        });\r\n        const handler = e => contextMenuAction({\r\n            event: e,\r\n            target: $(e.currentTarget)\r\n        });\r\n        contextMenuAction = this._createAction(contextMenuAction);\r\n        if (isRenderer(target) || target.nodeType || isWindow(target)) {\r\n            this._showContextMenuEventHandler = void 0;\r\n            eventsEngine.on(target, eventName, handler)\r\n        } else {\r\n            this._showContextMenuEventHandler = handler;\r\n            eventsEngine.on(domAdapter.getDocument(), eventName, target, this._showContextMenuEventHandler)\r\n        }\r\n    }\r\n    _hoverEndHandler(e) {\r\n        super._hoverEndHandler(e);\r\n        e.stopPropagation()\r\n    }\r\n    _renderDimensions() {}\r\n    _renderContainer($wrapper, submenuContainer) {\r\n        const $holder = submenuContainer || this._itemContainer();\r\n        $wrapper = $(\"<div>\");\r\n        $wrapper.appendTo($holder).addClass(\"dx-submenu\").css(\"visibility\", submenuContainer ? \"hidden\" : \"visible\");\r\n        if (!$wrapper.parent().hasClass(\"dx-overlay-content\")) {\r\n            this._addCustomCssClass($wrapper)\r\n        }\r\n        const $itemsContainer = super._renderContainer($wrapper);\r\n        if (submenuContainer) {\r\n            return $itemsContainer\r\n        }\r\n        if (this.option(\"width\")) {\r\n            return $itemsContainer.css(\"minWidth\", this.option(\"width\"))\r\n        }\r\n        if (this.option(\"height\")) {\r\n            return $itemsContainer.css(\"minHeight\", this.option(\"height\"))\r\n        }\r\n        return $itemsContainer\r\n    }\r\n    _renderSubmenuItems(node, $itemFrame) {\r\n        this._renderItems(this._getChildNodes(node), $itemFrame);\r\n        const $submenu = $itemFrame.children(\".dx-submenu\");\r\n        this._actions.onSubmenuCreated({\r\n            itemElement: getPublicElement($itemFrame),\r\n            itemData: node.internalFields.item,\r\n            submenuElement: getPublicElement($submenu)\r\n        });\r\n        this._initScrollable($submenu);\r\n        this.setAria({\r\n            role: \"menu\"\r\n        }, $submenu)\r\n    }\r\n    _getOverlayOptions() {\r\n        const position = this.option(\"position\");\r\n        const overlayOptions = {\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            animation: this.option(\"animation\"),\r\n            innerOverlay: true,\r\n            hideOnOutsideClick: e => this._hideOnOutsideClickHandler(e),\r\n            propagateOutsideClick: true,\r\n            hideOnParentScroll: true,\r\n            deferRendering: false,\r\n            position: {\r\n                at: position.at,\r\n                my: position.my,\r\n                of: this._getTarget(),\r\n                collision: \"flipfit\"\r\n            },\r\n            shading: false,\r\n            showTitle: false,\r\n            height: \"auto\",\r\n            width: \"auto\",\r\n            onShown: this._overlayShownActionHandler.bind(this),\r\n            onHiding: this._overlayHidingActionHandler.bind(this),\r\n            onHidden: this._overlayHiddenActionHandler.bind(this),\r\n            visualContainer: window\r\n        };\r\n        return overlayOptions\r\n    }\r\n    _overlayShownActionHandler(arg) {\r\n        this._actions.onShown(arg)\r\n    }\r\n    _overlayHidingActionHandler(arg) {\r\n        this._actions.onHiding(arg);\r\n        if (!arg.cancel) {\r\n            this._hideAllShownSubmenus();\r\n            this._setOptionWithoutOptionChange(\"visible\", false)\r\n        }\r\n    }\r\n    _overlayHiddenActionHandler(arg) {\r\n        this._actions.onHidden(arg)\r\n    }\r\n    _shouldHideOnOutsideClick(e) {\r\n        const {\r\n            closeOnOutsideClick: closeOnOutsideClick,\r\n            hideOnOutsideClick: hideOnOutsideClick\r\n        } = this.option();\r\n        if (isFunction(hideOnOutsideClick)) {\r\n            return hideOnOutsideClick(e)\r\n        }\r\n        if (isFunction(closeOnOutsideClick)) {\r\n            return closeOnOutsideClick(e)\r\n        }\r\n        return hideOnOutsideClick || closeOnOutsideClick\r\n    }\r\n    _hideOnOutsideClickHandler(e) {\r\n        if (!this._shouldHideOnOutsideClick(e)) {\r\n            return false\r\n        }\r\n        if (domAdapter.isDocument(e.target)) {\r\n            return true\r\n        }\r\n        const $activeItemContainer = this._getActiveItemsContainer(e.target);\r\n        const $itemContainers = this._getItemsContainers();\r\n        const $clickedItem = this._searchActiveItem(e.target);\r\n        const $rootItem = this.$element().parents(\".dx-menu-item\");\r\n        const isRootItemClicked = $clickedItem[0] === $rootItem[0] && $clickedItem.length && $rootItem.length;\r\n        const isInnerOverlayClicked = this._isIncludeOverlay($activeItemContainer, $itemContainers) && $clickedItem.length;\r\n        if (isInnerOverlayClicked || isRootItemClicked) {\r\n            if (\"onClick\" === this._getShowSubmenuMode()) {\r\n                this._hideAllShownChildSubmenus($clickedItem)\r\n            }\r\n            return false\r\n        }\r\n        return true\r\n    }\r\n    _getActiveItemsContainer(target) {\r\n        return $(target).closest(\".dx-menu-items-container\")\r\n    }\r\n    _getItemsContainers() {\r\n        return this._overlay.$content().find(\".dx-menu-items-container\")\r\n    }\r\n    _searchActiveItem(target) {\r\n        return $(target).closest(\".dx-menu-item\").eq(0)\r\n    }\r\n    _isIncludeOverlay($activeOverlay, $allOverlays) {\r\n        let isSame = false;\r\n        each($allOverlays, ((index, $overlay) => {\r\n            if ($activeOverlay.is($overlay) && !isSame) {\r\n                isSame = true\r\n            }\r\n        }));\r\n        return isSame\r\n    }\r\n    _hideAllShownChildSubmenus($clickedItem) {\r\n        const $submenuElements = $clickedItem.find(\".dx-submenu\");\r\n        const shownSubmenus = extend([], this._shownSubmenus);\r\n        if ($submenuElements.length > 0) {\r\n            each(shownSubmenus, ((index, $submenu) => {\r\n                const $context = this._searchActiveItem($submenu.context).parent();\r\n                if ($context.parent().is($clickedItem.parent().parent()) && !$context.is($clickedItem.parent())) {\r\n                    this._hideSubmenu($submenu)\r\n                }\r\n            }))\r\n        }\r\n    }\r\n    _initScrollable($container) {\r\n        this._createComponent($container, Scrollable, {\r\n            useKeyboard: false,\r\n            _onVisibilityChanged: scrollable => {\r\n                scrollable.scrollTo(0)\r\n            }\r\n        })\r\n    }\r\n    _setSubMenuHeight($submenu, anchor, isNestedSubmenu) {\r\n        const $itemsContainer = $submenu.find(\".dx-menu-items-container\");\r\n        const contentHeight = getOuterHeight($itemsContainer);\r\n        const maxHeight = this._getMaxHeight(anchor, !isNestedSubmenu);\r\n        const menuHeight = Math.min(contentHeight, maxHeight);\r\n        $submenu.css(\"height\", isNestedSubmenu ? menuHeight : \"100%\")\r\n    }\r\n    _getMaxHeight(anchor) {\r\n        let considerAnchorHeight = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : true;\r\n        const windowHeight = getOuterHeight(window);\r\n        const isAnchorRenderer = isRenderer(anchor);\r\n        const document = domAdapter.getDocument();\r\n        const isAnchorDocument = anchor.length && anchor[0] === document;\r\n        if (!isAnchorRenderer || isAnchorDocument) {\r\n            return windowHeight\r\n        }\r\n        const offsetTop = anchor[0].getBoundingClientRect().top;\r\n        const anchorHeight = getOuterHeight(anchor);\r\n        const availableHeight = considerAnchorHeight ? Math.max(offsetTop, windowHeight - offsetTop - anchorHeight) : Math.max(offsetTop + anchorHeight, windowHeight - offsetTop);\r\n        return availableHeight - 10\r\n    }\r\n    _dimensionChanged() {\r\n        if (!this._shownSubmenus) {\r\n            return\r\n        }\r\n        this._shownSubmenus.forEach(($submenu => {\r\n            const $item = $submenu.closest(\".dx-menu-item\");\r\n            this._setSubMenuHeight($submenu, $item, true);\r\n            this._scrollToElement($item);\r\n            const submenuPosition = this._getSubmenuPosition($item);\r\n            animationPosition.setup($submenu, submenuPosition)\r\n        }))\r\n    }\r\n    _getSubmenuBorderWidth() {\r\n        return isGeneric(currentTheme()) ? 1 : 0\r\n    }\r\n    _showSubmenu($item) {\r\n        const node = this._dataAdapter.getNodeByItem(this._getItemData($item));\r\n        this._hideSubmenusOnSameLevel($item);\r\n        if (!this._hasSubmenu(node)) {\r\n            return\r\n        }\r\n        let $submenu = $item.children(\".dx-submenu\");\r\n        const isSubmenuRendered = $submenu.length;\r\n        super._showSubmenu($item);\r\n        if (!isSubmenuRendered) {\r\n            this._renderSubmenuItems(node, $item);\r\n            $submenu = $item.children(\".dx-submenu\")\r\n        }\r\n        this._planPostRenderActions($submenu)\r\n    }\r\n    _setSubmenuVisible($submenu) {\r\n        if (!$submenu) {\r\n            return\r\n        }\r\n        const $item = null === $submenu || void 0 === $submenu ? void 0 : $submenu.closest(\".dx-menu-item\");\r\n        this._setSubMenuHeight($submenu, $item, true);\r\n        if (!this._isSubmenuVisible($submenu) && $item) {\r\n            this._drawSubmenu($item)\r\n        }\r\n    }\r\n    _hideSubmenusOnSameLevel($item) {\r\n        const $expandedItems = $item.parent(\".dx-menu-item-wrapper\").siblings().find(\".dx-menu-item-expanded\");\r\n        if ($expandedItems.length) {\r\n            $expandedItems.removeClass(\"dx-menu-item-expanded\");\r\n            this._hideSubmenu($expandedItems.find(\".dx-submenu\"))\r\n        }\r\n    }\r\n    _hideSubmenuGroup($submenu) {\r\n        if (this._isSubmenuVisible($submenu)) {\r\n            this._hideSubmenuCore($submenu)\r\n        }\r\n    }\r\n    _isSubmenuVisible($submenu) {\r\n        return \"visible\" === $submenu.css(\"visibility\")\r\n    }\r\n    _drawSubmenu($itemElement) {\r\n        const animation = this.option(\"animation\") ? this.option(\"animation\").show : {};\r\n        const $submenu = $itemElement.children(\".dx-submenu\");\r\n        const submenuPosition = this._getSubmenuPosition($itemElement);\r\n        if (this._overlay && this._overlay.option(\"visible\")) {\r\n            if (!isDefined(this._shownSubmenus)) {\r\n                this._shownSubmenus = []\r\n            }\r\n            if (!this._shownSubmenus.includes($submenu)) {\r\n                this._shownSubmenus.push($submenu)\r\n            }\r\n            if (animation) {\r\n                fx.stop($submenu)\r\n            }\r\n            animationPosition.setup($submenu, submenuPosition);\r\n            if (animation) {\r\n                if (isPlainObject(animation.to)) {\r\n                    animation.to.position = submenuPosition\r\n                }\r\n                this._animate($submenu, animation)\r\n            }\r\n            $submenu.css(\"visibility\", \"visible\")\r\n        }\r\n    }\r\n    _animate($container, options) {\r\n        fx.animate($container, options)\r\n    }\r\n    _getSubmenuPosition($rootItem) {\r\n        const submenuDirection = this.option(\"submenuDirection\").toLowerCase();\r\n        const $rootItemWrapper = $rootItem.parent(\".dx-menu-item-wrapper\");\r\n        const position = {\r\n            collision: \"flip\",\r\n            of: $rootItemWrapper,\r\n            offset: {\r\n                h: 0,\r\n                v: -1\r\n            }\r\n        };\r\n        switch (submenuDirection) {\r\n            case \"left\":\r\n                position.at = \"left top\";\r\n                position.my = \"right top\";\r\n                break;\r\n            case \"right\":\r\n                position.at = \"right top\";\r\n                position.my = \"left top\";\r\n                break;\r\n            default:\r\n                if (this.option(\"rtlEnabled\")) {\r\n                    position.at = \"left top\";\r\n                    position.my = \"right top\"\r\n                } else {\r\n                    position.at = \"right top\";\r\n                    position.my = \"left top\"\r\n                }\r\n        }\r\n        return position\r\n    }\r\n    _updateSubmenuVisibilityOnClick(actionArgs) {\r\n        if (!actionArgs.args.length) {\r\n            return\r\n        }\r\n        const {\r\n            itemData: itemData\r\n        } = actionArgs.args[0];\r\n        const node = this._dataAdapter.getNodeByItem(itemData);\r\n        if (!node) {\r\n            return\r\n        }\r\n        const $itemElement = $(actionArgs.args[0].itemElement);\r\n        let $submenu = $itemElement.find(\".dx-submenu\");\r\n        const shouldRenderSubmenu = this._hasSubmenu(node) && !$submenu.length;\r\n        if (shouldRenderSubmenu) {\r\n            this._renderSubmenuItems(node, $itemElement);\r\n            $submenu = $itemElement.find(\".dx-submenu\")\r\n        }\r\n        if ($itemElement.context === $submenu.context && \"visible\" === $submenu.css(\"visibility\")) {\r\n            return\r\n        }\r\n        this._updateSelectedItemOnClick(actionArgs);\r\n        const notCloseMenuOnItemClick = itemData && false === itemData.closeMenuOnClick;\r\n        if (!itemData || itemData.disabled || notCloseMenuOnItemClick) {\r\n            return\r\n        }\r\n        if (0 === $submenu.length) {\r\n            const $prevSubmenu = $($itemElement.parents(\".dx-submenu\")[0]);\r\n            this._hideSubmenu($prevSubmenu);\r\n            if (!actionArgs.canceled && this._overlay && this._overlay.option(\"visible\")) {\r\n                this.option(\"visible\", false)\r\n            }\r\n        } else {\r\n            if (this._shownSubmenus && this._shownSubmenus.length > 0) {\r\n                if (this._shownSubmenus[0].is($submenu)) {\r\n                    this._hideSubmenu($submenu)\r\n                }\r\n            }\r\n            this._showSubmenu($itemElement)\r\n        }\r\n    }\r\n    _hideSubmenu($curSubmenu) {\r\n        const shownSubmenus = extend([], this._shownSubmenus);\r\n        each(shownSubmenus, ((index, $submenu) => {\r\n            if ($curSubmenu.is($submenu) || contains($curSubmenu[0], $submenu[0])) {\r\n                $submenu.parent().removeClass(\"dx-menu-item-expanded\");\r\n                this._hideSubmenuCore($submenu)\r\n            }\r\n        }))\r\n    }\r\n    _hideSubmenuCore($submenu) {\r\n        const index = this._shownSubmenus.indexOf($submenu);\r\n        const animation = this.option(\"animation\") ? this.option(\"animation\").hide : null;\r\n        if (index >= 0) {\r\n            this._shownSubmenus.splice(index, 1)\r\n        }\r\n        this._stopAnimate($submenu);\r\n        animation && this._animate($submenu, animation);\r\n        $submenu.css(\"visibility\", \"hidden\");\r\n        const scrollableInstance = $submenu.dxScrollable(\"instance\");\r\n        scrollableInstance.scrollTo(0);\r\n        this.option(\"focusedElement\", null)\r\n    }\r\n    _stopAnimate($container) {\r\n        fx.stop($container, true)\r\n    }\r\n    _hideAllShownSubmenus() {\r\n        const shownSubmenus = extend([], this._shownSubmenus);\r\n        const $expandedItems = this._overlay.$content().find(\".dx-menu-item-expanded\");\r\n        $expandedItems.removeClass(\"dx-menu-item-expanded\");\r\n        each(shownSubmenus, ((_, $submenu) => {\r\n            this._hideSubmenu($submenu)\r\n        }))\r\n    }\r\n    _visibilityChanged(visible) {\r\n        if (visible) {\r\n            this._renderContentImpl()\r\n        }\r\n    }\r\n    _optionChanged(args) {\r\n        if (ACTIONS.includes(args.name)) {\r\n            this._initActions();\r\n            return\r\n        }\r\n        switch (args.name) {\r\n            case \"visible\":\r\n                this._renderVisibility(args.value);\r\n                break;\r\n            case \"showEvent\":\r\n            case \"position\":\r\n            case \"submenuDirection\":\r\n                this._invalidate();\r\n                break;\r\n            case \"target\":\r\n                args.previousValue && this._detachShowContextMenuEvents(args.previousValue);\r\n                this._invalidate();\r\n                break;\r\n            case \"closeOnOutsideClick\":\r\n            case \"hideOnOutsideClick\":\r\n                break;\r\n            default:\r\n                super._optionChanged(args)\r\n        }\r\n    }\r\n    _renderVisibility(showing) {\r\n        return showing ? this._show() : this._hide()\r\n    }\r\n    _toggleVisibility() {}\r\n    _show(event) {\r\n        const args = {\r\n            jQEvent: event\r\n        };\r\n        let promise = Deferred().reject().promise();\r\n        this._actions.onShowing(args);\r\n        if (args.cancel) {\r\n            return promise\r\n        }\r\n        const position = this._positionContextMenu(event);\r\n        if (position) {\r\n            var _event$originalEvent;\r\n            if (!this._overlay) {\r\n                this._renderContextMenuOverlay();\r\n                this._overlay.$content().addClass(this._widgetClass());\r\n                this._renderFocusState();\r\n                this._attachHoverEvents();\r\n                this._attachClickEvent();\r\n                this._renderItems(this._dataAdapter.getRootNodes())\r\n            }\r\n            const $subMenu = $(this._overlay.content()).children(\".dx-submenu\");\r\n            this._setOptionWithoutOptionChange(\"visible\", true);\r\n            this._overlay.option({\r\n                height: () => this._getMaxHeight(position.of),\r\n                maxHeight: () => {\r\n                    const $content = $subMenu.find(\".dx-menu-items-container\");\r\n                    const borderWidth = this._getSubmenuBorderWidth();\r\n                    return getOuterHeight($content) + 2 * borderWidth\r\n                },\r\n                position: position\r\n            });\r\n            if ($subMenu.length) {\r\n                this._setSubMenuHeight($subMenu, position.of, false)\r\n            }\r\n            promise = this._overlay.show();\r\n            event && event.stopPropagation();\r\n            this._setAriaAttributes();\r\n            if ((null === event || void 0 === event || null === (_event$originalEvent = event.originalEvent) || void 0 === _event$originalEvent ? void 0 : _event$originalEvent.type) === holdEvent.name) {\r\n                this.preventShowingDefaultContextMenuAboveOverlay()\r\n            }\r\n        }\r\n        return promise\r\n    }\r\n    _renderItems(nodes, submenuContainer) {\r\n        super._renderItems(nodes, submenuContainer);\r\n        const $submenu = $(this._overlay.content()).children(\".dx-submenu\");\r\n        if ($submenu.length) {\r\n            this._initScrollable($submenu)\r\n        }\r\n    }\r\n    _setAriaAttributes() {\r\n        this._overlayContentId = `dx-${new Guid}`;\r\n        this.setAria(\"owns\", this._overlayContentId);\r\n        this.setAria({\r\n            id: this._overlayContentId,\r\n            role: \"menu\"\r\n        }, this._overlay.$content())\r\n    }\r\n    _cleanAriaAttributes() {\r\n        this._overlay && this.setAria(\"id\", null, this._overlay.$content());\r\n        this.setAria(\"owns\", void 0)\r\n    }\r\n    _getTarget() {\r\n        return this.option(\"target\") || this.option(\"position\").of || $(domAdapter.getDocument())\r\n    }\r\n    _getContextMenuPosition() {\r\n        return extend({}, this.option(\"position\"), {\r\n            of: this._getTarget()\r\n        })\r\n    }\r\n    _positionContextMenu(jQEvent) {\r\n        let position = this._getContextMenuPosition();\r\n        const isInitialPosition = this._isInitialOptionValue(\"position\");\r\n        const positioningAction = this._createActionByOption(\"onPositioning\");\r\n        if (jQEvent && jQEvent.preventDefault && isInitialPosition) {\r\n            position.of = jQEvent\r\n        }\r\n        const actionArgs = {\r\n            position: position,\r\n            event: jQEvent\r\n        };\r\n        positioningAction(actionArgs);\r\n        if (actionArgs.cancel) {\r\n            position = null\r\n        } else if (actionArgs.event) {\r\n            actionArgs.event.cancel = true;\r\n            jQEvent.preventDefault()\r\n        }\r\n        return position\r\n    }\r\n    _refresh() {\r\n        if (!hasWindow()) {\r\n            super._refresh()\r\n        } else if (this._overlay) {\r\n            const lastPosition = this._overlay.option(\"position\");\r\n            super._refresh();\r\n            this._overlay && this._overlay.option(\"position\", lastPosition)\r\n        } else {\r\n            super._refresh()\r\n        }\r\n    }\r\n    _hide() {\r\n        let promise;\r\n        if (this._overlay) {\r\n            promise = this._overlay.hide();\r\n            this._setOptionWithoutOptionChange(\"visible\", false)\r\n        }\r\n        this._cleanAriaAttributes();\r\n        this.option(\"focusedElement\", null);\r\n        return promise || Deferred().reject().promise()\r\n    }\r\n    toggle(showing) {\r\n        const visible = this.option(\"visible\");\r\n        showing = void 0 === showing ? !visible : showing;\r\n        return this._renderVisibility(showing)\r\n    }\r\n    show() {\r\n        return this.toggle(true)\r\n    }\r\n    hide() {\r\n        return this.toggle(false)\r\n    }\r\n    _postProcessRenderItems($submenu) {\r\n        this._setSubmenuVisible($submenu)\r\n    }\r\n}\r\nregisterComponent(\"dxContextMenu\", ContextMenu);\r\nexport default ContextMenu;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}