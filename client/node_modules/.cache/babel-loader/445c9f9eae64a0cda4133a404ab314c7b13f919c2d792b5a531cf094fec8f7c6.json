{"ast":null,"code":"/**\r\n * DevExtreme (esm/__internal/grids/grid_core/m_utils.js)\r\n * Version: 24.2.7\r\n * Build date: Mon Apr 28 2025\r\n *\r\n * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport eventsEngine from \"../../../common/core/events/core/events_engine\";\nimport DataSource from \"../../../common/data/data_source\";\nimport { normalizeDataSourceOptions } from \"../../../common/data/data_source/utils\";\nimport { normalizeSortingInfo as normalizeSortingInfoUtility } from \"../../../common/data/utils\";\nimport $ from \"../../../core/renderer\";\nimport { equalByValue } from \"../../../core/utils/common\";\nimport { toComparable } from \"../../../core/utils/data\";\nimport { Deferred, when } from \"../../../core/utils/deferred\";\nimport { extend } from \"../../../core/utils/extend\";\nimport { each } from \"../../../core/utils/iterator\";\nimport { getBoundingRect } from \"../../../core/utils/position\";\nimport { getHeight, getInnerWidth, getOuterWidth } from \"../../../core/utils/size\";\nimport { format } from \"../../../core/utils/string\";\nimport { isDefined, isFunction, isString } from \"../../../core/utils/type\";\nimport variableWrapper from \"../../../core/utils/variable_wrapper\";\nimport { getWindow } from \"../../../core/utils/window\";\nimport formatHelper from \"../../../format_helper\";\nimport LoadPanel from \"../../../ui/load_panel\";\nimport sharedFiltering from \"../../../ui/shared/filtering\";\nconst DATAGRID_SELECTION_DISABLED_CLASS = \"dx-selection-disabled\";\nconst DATAGRID_GROUP_OPENED_CLASS = \"dx-datagrid-group-opened\";\nconst DATAGRID_GROUP_CLOSED_CLASS = \"dx-datagrid-group-closed\";\nconst DATAGRID_EXPAND_CLASS = \"dx-datagrid-expand\";\nconst NO_DATA_CLASS = \"nodata\";\nconst SCROLLING_MODE_INFINITE = \"infinite\";\nconst SCROLLING_MODE_VIRTUAL = \"virtual\";\nconst LEGACY_SCROLLING_MODE = \"scrolling.legacyMode\";\nconst SCROLLING_MODE_OPTION = \"scrolling.mode\";\nconst ROW_RENDERING_MODE_OPTION = \"scrolling.rowRenderingMode\";\nconst DATE_INTERVAL_SELECTORS = {\n  year: value => value && value.getFullYear(),\n  month: value => value && value.getMonth() + 1,\n  day: value => value && value.getDate(),\n  quarter: value => value && Math.floor(value.getMonth() / 3) + 1,\n  hour: value => value && value.getHours(),\n  minute: value => value && value.getMinutes(),\n  second: value => value && value.getSeconds()\n};\nconst getIntervalSelector = function () {\n  const data = arguments[1];\n  const value = this.calculateCellValue(data);\n  if (!isDefined(value)) {\n    return null;\n  }\n  if (isDateType(this.dataType)) {\n    const nameIntervalSelector = arguments[0];\n    return DATE_INTERVAL_SELECTORS[nameIntervalSelector](value);\n  }\n  if (\"number\" === this.dataType) {\n    const groupInterval = arguments[0];\n    return Math.floor(Number(value) / groupInterval) * groupInterval;\n  }\n};\nconst equalSelectors = function (selector1, selector2) {\n  if (isFunction(selector1) && isFunction(selector2)) {\n    if (selector1.originalCallback && selector2.originalCallback) {\n      return selector1.originalCallback === selector2.originalCallback && selector1.columnIndex === selector2.columnIndex;\n    }\n  }\n  return selector1 === selector2;\n};\nfunction isDateType(dataType) {\n  return \"date\" === dataType || \"datetime\" === dataType;\n}\nconst setEmptyText = function ($container) {\n  $container.get(0).textContent = \"\\xa0\";\n};\nconst normalizeSortingInfo = function (sort) {\n  sort = sort || [];\n  const result = normalizeSortingInfoUtility(sort);\n  for (let i = 0; i < sort.length; i++) {\n    if (sort && sort[i] && void 0 !== sort[i].isExpanded) {\n      result[i].isExpanded = sort[i].isExpanded;\n    }\n    if (sort && sort[i] && void 0 !== sort[i].groupInterval) {\n      result[i].groupInterval = sort[i].groupInterval;\n    }\n  }\n  return result;\n};\nconst formatValue = function (value, options) {\n  const valueText = formatHelper.format(value, options.format) || value && value.toString() || \"\";\n  const formatObject = {\n    value: value,\n    valueText: options.getDisplayFormat ? options.getDisplayFormat(valueText) : valueText,\n    target: options.target || \"row\",\n    groupInterval: options.groupInterval\n  };\n  return options.customizeText ? options.customizeText.call(options, formatObject) : formatObject.valueText;\n};\nconst getSummaryText = function (summaryItem, summaryTexts) {\n  const displayFormat = summaryItem.displayFormat || summaryItem.columnCaption && summaryTexts[`${summaryItem.summaryType}OtherColumn`] || summaryTexts[summaryItem.summaryType];\n  return formatValue(summaryItem.value, {\n    format: summaryItem.valueFormat,\n    getDisplayFormat: valueText => displayFormat ? format(displayFormat, valueText, summaryItem.columnCaption) : valueText,\n    customizeText: summaryItem.customizeText\n  });\n};\nconst getWidgetInstance = function ($element) {\n  const editorData = $element.data && $element.data();\n  const dxComponents = editorData && editorData.dxComponents;\n  const widgetName = dxComponents && dxComponents[0];\n  return widgetName && editorData[widgetName];\n};\nconst equalFilterParameters = function (filter1, filter2, langParams) {\n  if (Array.isArray(filter1) && Array.isArray(filter2)) {\n    if (filter1.length !== filter2.length) {\n      return false;\n    }\n    for (let i = 0; i < filter1.length; i++) {\n      if (!equalFilterParameters(filter1[i], filter2[i], langParams)) {\n        return false;\n      }\n    }\n    return true;\n  }\n  if (isFunction(filter1) && filter1.columnIndex >= 0 && isFunction(filter2) && filter2.columnIndex >= 0) {\n    return filter1.columnIndex === filter2.columnIndex && toComparable(filter1.filterValue, void 0, langParams) === toComparable(filter2.filterValue, void 0, langParams) && toComparable(filter1.selectedFilterOperation, void 0, langParams) === toComparable(filter2.selectedFilterOperation, void 0, langParams);\n  }\n  return toComparable(filter1, void 0, langParams) == toComparable(filter2, void 0, langParams);\n};\nconst createPoint = options => ({\n  index: options.index,\n  columnIndex: options.columnIndex,\n  x: options.x,\n  y: options.y\n});\nconst addPointIfNeed = (points, pointProps, pointCreated) => {\n  let notCreatePoint = false;\n  if (pointCreated) {\n    notCreatePoint = pointCreated(pointProps);\n  }\n  if (!notCreatePoint) {\n    const point = createPoint(pointProps);\n    points.push(point);\n  }\n};\nfunction normalizeGroupingLoadOptions(group) {\n  if (!Array.isArray(group)) {\n    group = [group];\n  }\n  return group.map((item, i) => {\n    if (isString(item)) {\n      return {\n        selector: item,\n        isExpanded: i < group.length - 1\n      };\n    }\n    return item;\n  });\n}\nexport default {\n  renderNoDataText($element) {\n    const that = this;\n    $element = $element || this.element();\n    if (!$element) {\n      return;\n    }\n    const noDataClass = that.addWidgetPrefix(\"nodata\");\n    let noDataElement = $element.find(`.${noDataClass}`).last();\n    const isVisible = this._dataController.isEmpty();\n    const isLoading = this._dataController.isLoading();\n    if (!noDataElement.length) {\n      noDataElement = $(\"<span>\").addClass(noDataClass);\n    }\n    if (!noDataElement.parent().is($element)) {\n      noDataElement.appendTo($element);\n    }\n    if (isVisible && !isLoading) {\n      noDataElement.removeClass(\"dx-hidden\").text(that._getNoDataText());\n    } else {\n      noDataElement.addClass(\"dx-hidden\");\n    }\n  },\n  renderLoadPanel($element, $container, isLocalStore) {\n    const that = this;\n    let loadPanelOptions;\n    that._loadPanel && that._loadPanel.$element().remove();\n    loadPanelOptions = that.option(\"loadPanel\");\n    if (loadPanelOptions && (\"auto\" === loadPanelOptions.enabled ? !isLocalStore : loadPanelOptions.enabled)) {\n      loadPanelOptions = extend({\n        shading: false,\n        message: loadPanelOptions.text,\n        container: $container\n      }, loadPanelOptions);\n      that._loadPanel = that._createComponent($(\"<div>\").appendTo($container), LoadPanel, loadPanelOptions);\n    } else {\n      that._loadPanel = null;\n    }\n  },\n  calculateLoadPanelPosition($element) {\n    const $window = $(getWindow());\n    if (getHeight($element) > getHeight($window)) {\n      return {\n        of: $window,\n        boundary: $element,\n        collision: \"fit\"\n      };\n    }\n    return {\n      of: $element\n    };\n  },\n  getIndexByKey(key, items, keyName) {\n    let index = -1;\n    if (void 0 !== key && Array.isArray(items)) {\n      keyName = arguments.length <= 2 ? \"key\" : keyName;\n      for (let i = 0; i < items.length; i++) {\n        const item = isDefined(keyName) ? items[i][keyName] : items[i];\n        if (equalByValue(key, item)) {\n          index = i;\n          break;\n        }\n      }\n    }\n    return index;\n  },\n  combineFilters(filters, operation) {\n    let resultFilter = [];\n    operation = operation || \"and\";\n    for (let i = 0; i < filters.length; i++) {\n      var _filters$i;\n      if (!filters[i]) {\n        continue;\n      }\n      if (1 === (null === (_filters$i = filters[i]) || void 0 === _filters$i ? void 0 : _filters$i.length) && \"!\" === filters[i][0]) {\n        if (\"and\" === operation) {\n          return [\"!\"];\n        }\n        if (\"or\" === operation) {\n          continue;\n        }\n      }\n      if (resultFilter.length) {\n        resultFilter.push(operation);\n      }\n      resultFilter.push(filters[i]);\n    }\n    if (1 === resultFilter.length) {\n      resultFilter = resultFilter[0];\n    }\n    if (resultFilter.length) {\n      return resultFilter;\n    }\n    return;\n  },\n  checkChanges(changes, changeNames) {\n    let changesWithChangeNamesCount = 0;\n    for (let i = 0; i < changeNames.length; i++) {\n      if (changes[changeNames[i]]) {\n        changesWithChangeNamesCount++;\n      }\n    }\n    return changes.length && changes.length === changesWithChangeNamesCount;\n  },\n  equalFilterParameters: equalFilterParameters,\n  proxyMethod(instance, methodName, defaultResult) {\n    if (!instance[methodName]) {\n      instance[methodName] = function () {\n        const dataSource = this._dataSource;\n        return dataSource ? dataSource[methodName].apply(dataSource, arguments) : defaultResult;\n      };\n    }\n  },\n  formatValue: formatValue,\n  getFormatOptionsByColumn: (column, target) => ({\n    format: column.format,\n    getDisplayFormat: column.getDisplayFormat,\n    customizeText: column.customizeText,\n    target: target,\n    trueText: column.trueText,\n    falseText: column.falseText\n  }),\n  getDisplayValue(column, value, data, rowType) {\n    if (column.displayValueMap && void 0 !== column.displayValueMap[value]) {\n      return column.displayValueMap[value];\n    }\n    if (column.calculateDisplayValue && data && \"group\" !== rowType) {\n      return column.calculateDisplayValue(data);\n    }\n    if (column.lookup && !(\"group\" === rowType && (column.calculateGroupValue || column.calculateDisplayValue))) {\n      return column.lookup.calculateCellValue(value);\n    }\n    return value;\n  },\n  getGroupRowSummaryText(summaryItems, summaryTexts) {\n    let result = \"(\";\n    for (let i = 0; i < summaryItems.length; i++) {\n      const summaryItem = summaryItems[i];\n      result += (i > 0 ? \", \" : \"\") + getSummaryText(summaryItem, summaryTexts);\n    }\n    return result + \")\";\n  },\n  getSummaryText: getSummaryText,\n  normalizeSortingInfo: normalizeSortingInfo,\n  getFormatByDataType(dataType) {\n    switch (dataType) {\n      case \"date\":\n        return \"shortDate\";\n      case \"datetime\":\n        return \"shortDateShortTime\";\n      default:\n        return;\n    }\n  },\n  getHeaderFilterGroupParameters(column, remoteGrouping) {\n    let result = [];\n    const dataField = column.dataField || column.name;\n    const groupInterval = sharedFiltering.getGroupInterval(column);\n    if (groupInterval) {\n      each(groupInterval, (index, interval) => {\n        result.push(remoteGrouping ? {\n          selector: dataField,\n          groupInterval: interval,\n          isExpanded: index < groupInterval.length - 1\n        } : getIntervalSelector.bind(column, interval));\n      });\n      return result;\n    }\n    if (remoteGrouping) {\n      result = [{\n        selector: dataField,\n        isExpanded: false\n      }];\n    } else {\n      result = function (data) {\n        let result = column.calculateCellValue(data);\n        if (void 0 === result || \"\" === result) {\n          result = null;\n        }\n        return result;\n      };\n      if (column.sortingMethod) {\n        result = [{\n          selector: result,\n          compare: column.sortingMethod.bind(column)\n        }];\n      }\n    }\n    return result;\n  },\n  equalSortParameters(sortParameters1, sortParameters2, ignoreIsExpanded) {\n    sortParameters1 = normalizeSortingInfo(sortParameters1);\n    sortParameters2 = normalizeSortingInfo(sortParameters2);\n    if (Array.isArray(sortParameters1) && Array.isArray(sortParameters2)) {\n      if (sortParameters1.length !== sortParameters2.length) {\n        return false;\n      }\n      for (let i = 0; i < sortParameters1.length; i++) {\n        if (!equalSelectors(sortParameters1[i].selector, sortParameters2[i].selector) || sortParameters1[i].desc !== sortParameters2[i].desc || sortParameters1[i].groupInterval !== sortParameters2[i].groupInterval || !ignoreIsExpanded && Boolean(sortParameters1[i].isExpanded) !== Boolean(sortParameters2[i].isExpanded)) {\n          return false;\n        }\n      }\n      return true;\n    }\n    return (!sortParameters1 || !sortParameters1.length) === (!sortParameters2 || !sortParameters2.length);\n  },\n  getPointsByColumns(items, pointCreated) {\n    let isVertical = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : false;\n    let startColumnIndex = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 0;\n    let needToCheckPrevPoint = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : false;\n    const result = [];\n    const cellsLength = items.length;\n    let $item;\n    let offset = {\n      left: 0,\n      top: 0\n    };\n    let itemRect = {\n      width: 0,\n      height: 0\n    };\n    let columnIndex = startColumnIndex;\n    let rtlEnabled;\n    for (let i = 0; i <= cellsLength; i++) {\n      var _$item;\n      if (i < cellsLength) {\n        $item = items.eq(i);\n        offset = $item.offset();\n        itemRect = getBoundingRect($item.get(0));\n        rtlEnabled = \"rtl\" === $item.css(\"direction\");\n      }\n      const offsetRight = offset.left + itemRect.width;\n      const offsetBottom = offset.top + itemRect.height;\n      const pointProps = {\n        index: columnIndex,\n        columnIndex: columnIndex,\n        item: null === (_$item = $item) || void 0 === _$item ? void 0 : _$item.get(0),\n        x: !isVertical && rtlEnabled !== (i === cellsLength) ? offsetRight : offset.left,\n        y: isVertical && i === cellsLength ? offsetBottom : offset.top\n      };\n      if (!isVertical && i > 0) {\n        const prevItemOffset = items.eq(i - 1).offset();\n        const {\n          width: prevItemWidth\n        } = getBoundingRect(items[i - 1]);\n        const prevItemOffsetX = rtlEnabled ? prevItemOffset.left : prevItemOffset.left + prevItemWidth;\n        if (prevItemOffset.top < pointProps.y) {\n          pointProps.y = prevItemOffset.top;\n        }\n        if (needToCheckPrevPoint && Math.round(prevItemOffsetX) !== Math.round(pointProps.x)) {\n          const prevPointProps = _extends({}, pointProps, {\n            item: items[i - 1],\n            x: prevItemOffsetX\n          });\n          if (rtlEnabled) {\n            pointProps.isRightBoundary = true;\n            prevPointProps.isLeftBoundary = true;\n          } else {\n            pointProps.isLeftBoundary = true;\n            prevPointProps.isRightBoundary = true;\n          }\n          addPointIfNeed(result, prevPointProps, pointCreated);\n        }\n      }\n      addPointIfNeed(result, pointProps, pointCreated);\n      columnIndex++;\n    }\n    return result;\n  },\n  getExpandCellTemplate: () => ({\n    allowRenderToDetachedContainer: true,\n    render(container, options) {\n      const $container = $(container);\n      if (isDefined(options.value) && !(options.data && options.data.isContinuation) && !options.row.isNewRow) {\n        const rowsView = options.component.getView(\"rowsView\");\n        $container.addClass(\"dx-datagrid-expand\").addClass(\"dx-selection-disabled\");\n        $(\"<div>\").addClass(options.value ? \"dx-datagrid-group-opened\" : \"dx-datagrid-group-closed\").appendTo($container);\n        rowsView.setAria(\"label\", options.value ? rowsView.localize(\"dxDataGrid-ariaCollapse\") : rowsView.localize(\"dxDataGrid-ariaExpand\"), $container);\n      } else {\n        setEmptyText($container);\n      }\n    }\n  }),\n  setEmptyText: setEmptyText,\n  isDateType: isDateType,\n  getSelectionRange(focusedElement) {\n    try {\n      if (focusedElement) {\n        return {\n          selectionStart: focusedElement.selectionStart,\n          selectionEnd: focusedElement.selectionEnd\n        };\n      }\n    } catch (e) {}\n    return {};\n  },\n  setSelectionRange(focusedElement, selectionRange) {\n    try {\n      if (focusedElement && focusedElement.setSelectionRange) {\n        focusedElement.setSelectionRange(selectionRange.selectionStart, selectionRange.selectionEnd);\n      }\n    } catch (e) {}\n  },\n  focusAndSelectElement(component, $element) {\n    const isFocused = $element.is(\":focus\");\n    eventsEngine.trigger($element, \"focus\");\n    const isSelectTextOnEditingStart = component.option(\"editing.selectTextOnEditStart\");\n    const element = $element.get(0);\n    if (!isFocused && isSelectTextOnEditingStart && $element.is(\".dx-texteditor-input\") && !$element.is(\"[readonly]\")) {\n      const editor = getWidgetInstance($element.closest(\".dx-texteditor\"));\n      when(editor && editor._loadItemDeferred).done(() => {\n        element.select();\n      });\n    }\n  },\n  getWidgetInstance: getWidgetInstance,\n  getLastResizableColumnIndex(columns, resultWidths) {\n    const hasResizableColumns = columns.some(column => column && !column.command && !column.fixed && false !== column.allowResizing);\n    let lastColumnIndex;\n    for (lastColumnIndex = columns.length - 1; columns[lastColumnIndex]; lastColumnIndex--) {\n      const column = columns[lastColumnIndex];\n      const width = resultWidths && resultWidths[lastColumnIndex];\n      const allowResizing = !hasResizableColumns || false !== column.allowResizing;\n      if (!column.command && !column.fixed && \"adaptiveHidden\" !== width && allowResizing) {\n        break;\n      }\n    }\n    return lastColumnIndex;\n  },\n  isElementInCurrentGrid(controller, $element) {\n    if ($element && $element.length) {\n      const $grid = $element.closest(`.${controller.getWidgetContainerClass()}`).parent();\n      return $grid.is(controller.component.$element());\n    }\n    return false;\n  },\n  isVirtualRowRendering(that) {\n    const rowRenderingMode = that.option(ROW_RENDERING_MODE_OPTION);\n    const isVirtualMode = \"virtual\" === that.option(\"scrolling.mode\");\n    const isAppendMode = \"infinite\" === that.option(\"scrolling.mode\");\n    if (false === that.option(LEGACY_SCROLLING_MODE) && (isVirtualMode || isAppendMode)) {\n      return true;\n    }\n    return \"virtual\" === rowRenderingMode;\n  },\n  getPixelRatio: window => window.devicePixelRatio || 1,\n  getContentHeightLimit(browser) {\n    if (browser.mozilla) {\n      return 8e6;\n    }\n    return 15e6 / this.getPixelRatio(getWindow());\n  },\n  normalizeLookupDataSource(lookup) {\n    let lookupDataSourceOptions;\n    if (lookup.items) {\n      lookupDataSourceOptions = lookup.items;\n    } else {\n      lookupDataSourceOptions = lookup.dataSource;\n      if (isFunction(lookupDataSourceOptions) && !variableWrapper.isWrapped(lookupDataSourceOptions)) {\n        lookupDataSourceOptions = lookupDataSourceOptions({});\n      }\n    }\n    return normalizeDataSourceOptions(lookupDataSourceOptions);\n  },\n  getWrappedLookupDataSource(column, dataSource, filter) {\n    if (!dataSource) {\n      return [];\n    }\n    const lookupDataSourceOptions = this.normalizeLookupDataSource(column.lookup);\n    if (column.calculateCellValue !== column.defaultCalculateCellValue) {\n      return lookupDataSourceOptions;\n    }\n    const hasGroupPaging = dataSource.remoteOperations().groupPaging;\n    const hasLookupOptimization = column.displayField && isString(column.displayField);\n    let cachedUniqueRelevantItems;\n    let previousTake;\n    let previousSkip;\n    const sliceItems = (items, loadOptions) => {\n      const start = loadOptions.skip ?? 0;\n      const end = loadOptions.take ? start + loadOptions.take : items.length;\n      return items.slice(start, end);\n    };\n    const lookupDataSource = _extends({}, lookupDataSourceOptions, {\n      __dataGridSourceFilter: filter,\n      load: loadOptions => {\n        const d = new Deferred();\n        (loadOptions => {\n          const group = normalizeGroupingLoadOptions(hasLookupOptimization ? [column.dataField, column.displayField] : column.dataField);\n          const d = new Deferred();\n          const canUseCache = cachedUniqueRelevantItems && (!hasGroupPaging || loadOptions.skip === previousSkip && loadOptions.take === previousTake);\n          if (canUseCache) {\n            d.resolve(sliceItems(cachedUniqueRelevantItems, loadOptions));\n          } else {\n            previousSkip = loadOptions.skip;\n            previousTake = loadOptions.take;\n            dataSource.load({\n              filter: filter,\n              group: group,\n              take: hasGroupPaging ? loadOptions.take : void 0,\n              skip: hasGroupPaging ? loadOptions.skip : void 0\n            }).done(items => {\n              cachedUniqueRelevantItems = items;\n              d.resolve(hasGroupPaging ? items : sliceItems(items, loadOptions));\n            }).fail(d.fail);\n          }\n          return d;\n        })(loadOptions).done(items => {\n          if (0 === items.length) {\n            d.resolve([]);\n            return;\n          }\n          const filter = this.combineFilters(items.flatMap(data => data.key).map(key => [column.lookup.valueExpr, key]), \"or\");\n          const newDataSource = new DataSource(_extends({}, lookupDataSourceOptions, loadOptions, {\n            filter: this.combineFilters([filter, loadOptions.filter], \"and\"),\n            paginate: false\n          }));\n          newDataSource.load().done(d.resolve).fail(d.fail);\n        }).fail(d.fail);\n        return d;\n      },\n      key: column.lookup.valueExpr,\n      byKey(key) {\n        const d = Deferred();\n        this.load({\n          filter: [column.lookup.valueExpr, \"=\", key]\n        }).done(arr => {\n          d.resolve(arr[0]);\n        });\n        return d.promise();\n      }\n    });\n    return lookupDataSource;\n  },\n  logHeaderFilterDeprecatedWarningIfNeed(component) {\n    const logWarning = component._logDeprecatedOptionWarning.bind(component);\n    if (isDefined(component.option(\"headerFilter.allowSearch\"))) {\n      logWarning(\"headerFilter.allowSearch\", {\n        since: \"23.1\",\n        alias: \"headerFilter.search.enabled\"\n      });\n    }\n    if (isDefined(component.option(\"headerFilter.searchTimeout\"))) {\n      logWarning(\"headerFilter.searchTimeout\", {\n        since: \"23.1\",\n        alias: \"headerFilter.search.timeout\"\n      });\n    }\n    const specificName = \"dxPivotGrid\" === component.NAME ? \"dataSource.fields\" : \"columns\";\n    const columns = component.option(specificName);\n    if (!Array.isArray(columns)) {\n      return;\n    }\n    const logSpecificDeprecatedWarningIfNeed = columns => {\n      columns.forEach(column => {\n        var _column$columns;\n        const headerFilter = column.headerFilter || {};\n        if (isDefined(headerFilter.allowSearch)) {\n          logWarning(`${specificName}[].headerFilter.allowSearch`, {\n            since: \"23.1\",\n            alias: `${specificName}[].headerFilter.search.enabled`\n          });\n        }\n        if (isDefined(headerFilter.searchMode)) {\n          logWarning(`${specificName}[].headerFilter.searchMode`, {\n            since: \"23.1\",\n            alias: `${specificName}[].headerFilter.search.mode`\n          });\n        }\n        if (null !== (_column$columns = column.columns) && void 0 !== _column$columns && _column$columns.length) {\n          logSpecificDeprecatedWarningIfNeed(column.columns);\n        }\n      });\n    };\n    logSpecificDeprecatedWarningIfNeed(columns);\n  },\n  getComponentBorderWidth(that, $rowsViewElement) {\n    const borderWidth = that.option(\"showBorders\") ? Math.ceil(getOuterWidth($rowsViewElement) - getInnerWidth($rowsViewElement)) : 0;\n    return borderWidth;\n  },\n  isCustomCommandColumn(columns, commandColumn) {\n    const customCommandColumns = columns.filter(column => column.type === commandColumn.type);\n    return !!customCommandColumns.length;\n  }\n};","map":{"version":3,"names":["_extends","eventsEngine","DataSource","normalizeDataSourceOptions","normalizeSortingInfo","normalizeSortingInfoUtility","$","equalByValue","toComparable","Deferred","when","extend","each","getBoundingRect","getHeight","getInnerWidth","getOuterWidth","format","isDefined","isFunction","isString","variableWrapper","getWindow","formatHelper","LoadPanel","sharedFiltering","DATAGRID_SELECTION_DISABLED_CLASS","DATAGRID_GROUP_OPENED_CLASS","DATAGRID_GROUP_CLOSED_CLASS","DATAGRID_EXPAND_CLASS","NO_DATA_CLASS","SCROLLING_MODE_INFINITE","SCROLLING_MODE_VIRTUAL","LEGACY_SCROLLING_MODE","SCROLLING_MODE_OPTION","ROW_RENDERING_MODE_OPTION","DATE_INTERVAL_SELECTORS","year","value","getFullYear","month","getMonth","day","getDate","quarter","Math","floor","hour","getHours","minute","getMinutes","second","getSeconds","getIntervalSelector","data","arguments","calculateCellValue","isDateType","dataType","nameIntervalSelector","groupInterval","Number","equalSelectors","selector1","selector2","originalCallback","columnIndex","setEmptyText","$container","get","textContent","sort","result","i","length","isExpanded","formatValue","options","valueText","toString","formatObject","getDisplayFormat","target","customizeText","call","getSummaryText","summaryItem","summaryTexts","displayFormat","columnCaption","summaryType","valueFormat","getWidgetInstance","$element","editorData","dxComponents","widgetName","equalFilterParameters","filter1","filter2","langParams","Array","isArray","filterValue","selectedFilterOperation","createPoint","index","x","y","addPointIfNeed","points","pointProps","pointCreated","notCreatePoint","point","push","normalizeGroupingLoadOptions","group","map","item","selector","renderNoDataText","that","element","noDataClass","addWidgetPrefix","noDataElement","find","last","isVisible","_dataController","isEmpty","isLoading","addClass","parent","is","appendTo","removeClass","text","_getNoDataText","renderLoadPanel","isLocalStore","loadPanelOptions","_loadPanel","remove","option","enabled","shading","message","container","_createComponent","calculateLoadPanelPosition","$window","of","boundary","collision","getIndexByKey","key","items","keyName","combineFilters","filters","operation","resultFilter","_filters$i","checkChanges","changes","changeNames","changesWithChangeNamesCount","proxyMethod","instance","methodName","defaultResult","dataSource","_dataSource","apply","getFormatOptionsByColumn","column","trueText","falseText","getDisplayValue","rowType","displayValueMap","calculateDisplayValue","lookup","calculateGroupValue","getGroupRowSummaryText","summaryItems","getFormatByDataType","getHeaderFilterGroupParameters","remoteGrouping","dataField","name","getGroupInterval","interval","bind","sortingMethod","compare","equalSortParameters","sortParameters1","sortParameters2","ignoreIsExpanded","desc","Boolean","getPointsByColumns","isVertical","startColumnIndex","needToCheckPrevPoint","cellsLength","$item","offset","left","top","itemRect","width","height","rtlEnabled","_$item","eq","css","offsetRight","offsetBottom","prevItemOffset","prevItemWidth","prevItemOffsetX","round","prevPointProps","isRightBoundary","isLeftBoundary","getExpandCellTemplate","allowRenderToDetachedContainer","render","isContinuation","row","isNewRow","rowsView","component","getView","setAria","localize","getSelectionRange","focusedElement","selectionStart","selectionEnd","e","setSelectionRange","selectionRange","focusAndSelectElement","isFocused","trigger","isSelectTextOnEditingStart","editor","closest","_loadItemDeferred","done","select","getLastResizableColumnIndex","columns","resultWidths","hasResizableColumns","some","command","fixed","allowResizing","lastColumnIndex","isElementInCurrentGrid","controller","$grid","getWidgetContainerClass","isVirtualRowRendering","rowRenderingMode","isVirtualMode","isAppendMode","getPixelRatio","window","devicePixelRatio","getContentHeightLimit","browser","mozilla","normalizeLookupDataSource","lookupDataSourceOptions","isWrapped","getWrappedLookupDataSource","filter","defaultCalculateCellValue","hasGroupPaging","remoteOperations","groupPaging","hasLookupOptimization","displayField","cachedUniqueRelevantItems","previousTake","previousSkip","sliceItems","loadOptions","start","skip","end","take","slice","lookupDataSource","__dataGridSourceFilter","load","d","canUseCache","resolve","fail","flatMap","valueExpr","newDataSource","paginate","byKey","arr","promise","logHeaderFilterDeprecatedWarningIfNeed","logWarning","_logDeprecatedOptionWarning","since","alias","specificName","NAME","logSpecificDeprecatedWarningIfNeed","forEach","_column$columns","headerFilter","allowSearch","searchMode","getComponentBorderWidth","$rowsViewElement","borderWidth","ceil","isCustomCommandColumn","commandColumn","customCommandColumns","type"],"sources":["C:/Users/Sofia/Desktop/Репозиторий ЦК/internship_project/client/node_modules/devextreme/esm/__internal/grids/grid_core/m_utils.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/__internal/grids/grid_core/m_utils.js)\r\n * Version: 24.2.7\r\n * Build date: Mon Apr 28 2025\r\n *\r\n * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\r\nimport eventsEngine from \"../../../common/core/events/core/events_engine\";\r\nimport DataSource from \"../../../common/data/data_source\";\r\nimport {\r\n    normalizeDataSourceOptions\r\n} from \"../../../common/data/data_source/utils\";\r\nimport {\r\n    normalizeSortingInfo as normalizeSortingInfoUtility\r\n} from \"../../../common/data/utils\";\r\nimport $ from \"../../../core/renderer\";\r\nimport {\r\n    equalByValue\r\n} from \"../../../core/utils/common\";\r\nimport {\r\n    toComparable\r\n} from \"../../../core/utils/data\";\r\nimport {\r\n    Deferred,\r\n    when\r\n} from \"../../../core/utils/deferred\";\r\nimport {\r\n    extend\r\n} from \"../../../core/utils/extend\";\r\nimport {\r\n    each\r\n} from \"../../../core/utils/iterator\";\r\nimport {\r\n    getBoundingRect\r\n} from \"../../../core/utils/position\";\r\nimport {\r\n    getHeight,\r\n    getInnerWidth,\r\n    getOuterWidth\r\n} from \"../../../core/utils/size\";\r\nimport {\r\n    format\r\n} from \"../../../core/utils/string\";\r\nimport {\r\n    isDefined,\r\n    isFunction,\r\n    isString\r\n} from \"../../../core/utils/type\";\r\nimport variableWrapper from \"../../../core/utils/variable_wrapper\";\r\nimport {\r\n    getWindow\r\n} from \"../../../core/utils/window\";\r\nimport formatHelper from \"../../../format_helper\";\r\nimport LoadPanel from \"../../../ui/load_panel\";\r\nimport sharedFiltering from \"../../../ui/shared/filtering\";\r\nconst DATAGRID_SELECTION_DISABLED_CLASS = \"dx-selection-disabled\";\r\nconst DATAGRID_GROUP_OPENED_CLASS = \"dx-datagrid-group-opened\";\r\nconst DATAGRID_GROUP_CLOSED_CLASS = \"dx-datagrid-group-closed\";\r\nconst DATAGRID_EXPAND_CLASS = \"dx-datagrid-expand\";\r\nconst NO_DATA_CLASS = \"nodata\";\r\nconst SCROLLING_MODE_INFINITE = \"infinite\";\r\nconst SCROLLING_MODE_VIRTUAL = \"virtual\";\r\nconst LEGACY_SCROLLING_MODE = \"scrolling.legacyMode\";\r\nconst SCROLLING_MODE_OPTION = \"scrolling.mode\";\r\nconst ROW_RENDERING_MODE_OPTION = \"scrolling.rowRenderingMode\";\r\nconst DATE_INTERVAL_SELECTORS = {\r\n    year: value => value && value.getFullYear(),\r\n    month: value => value && value.getMonth() + 1,\r\n    day: value => value && value.getDate(),\r\n    quarter: value => value && Math.floor(value.getMonth() / 3) + 1,\r\n    hour: value => value && value.getHours(),\r\n    minute: value => value && value.getMinutes(),\r\n    second: value => value && value.getSeconds()\r\n};\r\nconst getIntervalSelector = function() {\r\n    const data = arguments[1];\r\n    const value = this.calculateCellValue(data);\r\n    if (!isDefined(value)) {\r\n        return null\r\n    }\r\n    if (isDateType(this.dataType)) {\r\n        const nameIntervalSelector = arguments[0];\r\n        return DATE_INTERVAL_SELECTORS[nameIntervalSelector](value)\r\n    }\r\n    if (\"number\" === this.dataType) {\r\n        const groupInterval = arguments[0];\r\n        return Math.floor(Number(value) / groupInterval) * groupInterval\r\n    }\r\n};\r\nconst equalSelectors = function(selector1, selector2) {\r\n    if (isFunction(selector1) && isFunction(selector2)) {\r\n        if (selector1.originalCallback && selector2.originalCallback) {\r\n            return selector1.originalCallback === selector2.originalCallback && selector1.columnIndex === selector2.columnIndex\r\n        }\r\n    }\r\n    return selector1 === selector2\r\n};\r\n\r\nfunction isDateType(dataType) {\r\n    return \"date\" === dataType || \"datetime\" === dataType\r\n}\r\nconst setEmptyText = function($container) {\r\n    $container.get(0).textContent = \"\\xa0\"\r\n};\r\nconst normalizeSortingInfo = function(sort) {\r\n    sort = sort || [];\r\n    const result = normalizeSortingInfoUtility(sort);\r\n    for (let i = 0; i < sort.length; i++) {\r\n        if (sort && sort[i] && void 0 !== sort[i].isExpanded) {\r\n            result[i].isExpanded = sort[i].isExpanded\r\n        }\r\n        if (sort && sort[i] && void 0 !== sort[i].groupInterval) {\r\n            result[i].groupInterval = sort[i].groupInterval\r\n        }\r\n    }\r\n    return result\r\n};\r\nconst formatValue = function(value, options) {\r\n    const valueText = formatHelper.format(value, options.format) || value && value.toString() || \"\";\r\n    const formatObject = {\r\n        value: value,\r\n        valueText: options.getDisplayFormat ? options.getDisplayFormat(valueText) : valueText,\r\n        target: options.target || \"row\",\r\n        groupInterval: options.groupInterval\r\n    };\r\n    return options.customizeText ? options.customizeText.call(options, formatObject) : formatObject.valueText\r\n};\r\nconst getSummaryText = function(summaryItem, summaryTexts) {\r\n    const displayFormat = summaryItem.displayFormat || summaryItem.columnCaption && summaryTexts[`${summaryItem.summaryType}OtherColumn`] || summaryTexts[summaryItem.summaryType];\r\n    return formatValue(summaryItem.value, {\r\n        format: summaryItem.valueFormat,\r\n        getDisplayFormat: valueText => displayFormat ? format(displayFormat, valueText, summaryItem.columnCaption) : valueText,\r\n        customizeText: summaryItem.customizeText\r\n    })\r\n};\r\nconst getWidgetInstance = function($element) {\r\n    const editorData = $element.data && $element.data();\r\n    const dxComponents = editorData && editorData.dxComponents;\r\n    const widgetName = dxComponents && dxComponents[0];\r\n    return widgetName && editorData[widgetName]\r\n};\r\nconst equalFilterParameters = function(filter1, filter2, langParams) {\r\n    if (Array.isArray(filter1) && Array.isArray(filter2)) {\r\n        if (filter1.length !== filter2.length) {\r\n            return false\r\n        }\r\n        for (let i = 0; i < filter1.length; i++) {\r\n            if (!equalFilterParameters(filter1[i], filter2[i], langParams)) {\r\n                return false\r\n            }\r\n        }\r\n        return true\r\n    }\r\n    if (isFunction(filter1) && filter1.columnIndex >= 0 && isFunction(filter2) && filter2.columnIndex >= 0) {\r\n        return filter1.columnIndex === filter2.columnIndex && toComparable(filter1.filterValue, void 0, langParams) === toComparable(filter2.filterValue, void 0, langParams) && toComparable(filter1.selectedFilterOperation, void 0, langParams) === toComparable(filter2.selectedFilterOperation, void 0, langParams)\r\n    }\r\n    return toComparable(filter1, void 0, langParams) == toComparable(filter2, void 0, langParams)\r\n};\r\nconst createPoint = options => ({\r\n    index: options.index,\r\n    columnIndex: options.columnIndex,\r\n    x: options.x,\r\n    y: options.y\r\n});\r\nconst addPointIfNeed = (points, pointProps, pointCreated) => {\r\n    let notCreatePoint = false;\r\n    if (pointCreated) {\r\n        notCreatePoint = pointCreated(pointProps)\r\n    }\r\n    if (!notCreatePoint) {\r\n        const point = createPoint(pointProps);\r\n        points.push(point)\r\n    }\r\n};\r\n\r\nfunction normalizeGroupingLoadOptions(group) {\r\n    if (!Array.isArray(group)) {\r\n        group = [group]\r\n    }\r\n    return group.map(((item, i) => {\r\n        if (isString(item)) {\r\n            return {\r\n                selector: item,\r\n                isExpanded: i < group.length - 1\r\n            }\r\n        }\r\n        return item\r\n    }))\r\n}\r\nexport default {\r\n    renderNoDataText($element) {\r\n        const that = this;\r\n        $element = $element || this.element();\r\n        if (!$element) {\r\n            return\r\n        }\r\n        const noDataClass = that.addWidgetPrefix(\"nodata\");\r\n        let noDataElement = $element.find(`.${noDataClass}`).last();\r\n        const isVisible = this._dataController.isEmpty();\r\n        const isLoading = this._dataController.isLoading();\r\n        if (!noDataElement.length) {\r\n            noDataElement = $(\"<span>\").addClass(noDataClass)\r\n        }\r\n        if (!noDataElement.parent().is($element)) {\r\n            noDataElement.appendTo($element)\r\n        }\r\n        if (isVisible && !isLoading) {\r\n            noDataElement.removeClass(\"dx-hidden\").text(that._getNoDataText())\r\n        } else {\r\n            noDataElement.addClass(\"dx-hidden\")\r\n        }\r\n    },\r\n    renderLoadPanel($element, $container, isLocalStore) {\r\n        const that = this;\r\n        let loadPanelOptions;\r\n        that._loadPanel && that._loadPanel.$element().remove();\r\n        loadPanelOptions = that.option(\"loadPanel\");\r\n        if (loadPanelOptions && (\"auto\" === loadPanelOptions.enabled ? !isLocalStore : loadPanelOptions.enabled)) {\r\n            loadPanelOptions = extend({\r\n                shading: false,\r\n                message: loadPanelOptions.text,\r\n                container: $container\r\n            }, loadPanelOptions);\r\n            that._loadPanel = that._createComponent($(\"<div>\").appendTo($container), LoadPanel, loadPanelOptions)\r\n        } else {\r\n            that._loadPanel = null\r\n        }\r\n    },\r\n    calculateLoadPanelPosition($element) {\r\n        const $window = $(getWindow());\r\n        if (getHeight($element) > getHeight($window)) {\r\n            return {\r\n                of: $window,\r\n                boundary: $element,\r\n                collision: \"fit\"\r\n            }\r\n        }\r\n        return {\r\n            of: $element\r\n        }\r\n    },\r\n    getIndexByKey(key, items, keyName) {\r\n        let index = -1;\r\n        if (void 0 !== key && Array.isArray(items)) {\r\n            keyName = arguments.length <= 2 ? \"key\" : keyName;\r\n            for (let i = 0; i < items.length; i++) {\r\n                const item = isDefined(keyName) ? items[i][keyName] : items[i];\r\n                if (equalByValue(key, item)) {\r\n                    index = i;\r\n                    break\r\n                }\r\n            }\r\n        }\r\n        return index\r\n    },\r\n    combineFilters(filters, operation) {\r\n        let resultFilter = [];\r\n        operation = operation || \"and\";\r\n        for (let i = 0; i < filters.length; i++) {\r\n            var _filters$i;\r\n            if (!filters[i]) {\r\n                continue\r\n            }\r\n            if (1 === (null === (_filters$i = filters[i]) || void 0 === _filters$i ? void 0 : _filters$i.length) && \"!\" === filters[i][0]) {\r\n                if (\"and\" === operation) {\r\n                    return [\"!\"]\r\n                }\r\n                if (\"or\" === operation) {\r\n                    continue\r\n                }\r\n            }\r\n            if (resultFilter.length) {\r\n                resultFilter.push(operation)\r\n            }\r\n            resultFilter.push(filters[i])\r\n        }\r\n        if (1 === resultFilter.length) {\r\n            resultFilter = resultFilter[0]\r\n        }\r\n        if (resultFilter.length) {\r\n            return resultFilter\r\n        }\r\n        return\r\n    },\r\n    checkChanges(changes, changeNames) {\r\n        let changesWithChangeNamesCount = 0;\r\n        for (let i = 0; i < changeNames.length; i++) {\r\n            if (changes[changeNames[i]]) {\r\n                changesWithChangeNamesCount++\r\n            }\r\n        }\r\n        return changes.length && changes.length === changesWithChangeNamesCount\r\n    },\r\n    equalFilterParameters: equalFilterParameters,\r\n    proxyMethod(instance, methodName, defaultResult) {\r\n        if (!instance[methodName]) {\r\n            instance[methodName] = function() {\r\n                const dataSource = this._dataSource;\r\n                return dataSource ? dataSource[methodName].apply(dataSource, arguments) : defaultResult\r\n            }\r\n        }\r\n    },\r\n    formatValue: formatValue,\r\n    getFormatOptionsByColumn: (column, target) => ({\r\n        format: column.format,\r\n        getDisplayFormat: column.getDisplayFormat,\r\n        customizeText: column.customizeText,\r\n        target: target,\r\n        trueText: column.trueText,\r\n        falseText: column.falseText\r\n    }),\r\n    getDisplayValue(column, value, data, rowType) {\r\n        if (column.displayValueMap && void 0 !== column.displayValueMap[value]) {\r\n            return column.displayValueMap[value]\r\n        }\r\n        if (column.calculateDisplayValue && data && \"group\" !== rowType) {\r\n            return column.calculateDisplayValue(data)\r\n        }\r\n        if (column.lookup && !(\"group\" === rowType && (column.calculateGroupValue || column.calculateDisplayValue))) {\r\n            return column.lookup.calculateCellValue(value)\r\n        }\r\n        return value\r\n    },\r\n    getGroupRowSummaryText(summaryItems, summaryTexts) {\r\n        let result = \"(\";\r\n        for (let i = 0; i < summaryItems.length; i++) {\r\n            const summaryItem = summaryItems[i];\r\n            result += (i > 0 ? \", \" : \"\") + getSummaryText(summaryItem, summaryTexts)\r\n        }\r\n        return result + \")\"\r\n    },\r\n    getSummaryText: getSummaryText,\r\n    normalizeSortingInfo: normalizeSortingInfo,\r\n    getFormatByDataType(dataType) {\r\n        switch (dataType) {\r\n            case \"date\":\r\n                return \"shortDate\";\r\n            case \"datetime\":\r\n                return \"shortDateShortTime\";\r\n            default:\r\n                return\r\n        }\r\n    },\r\n    getHeaderFilterGroupParameters(column, remoteGrouping) {\r\n        let result = [];\r\n        const dataField = column.dataField || column.name;\r\n        const groupInterval = sharedFiltering.getGroupInterval(column);\r\n        if (groupInterval) {\r\n            each(groupInterval, ((index, interval) => {\r\n                result.push(remoteGrouping ? {\r\n                    selector: dataField,\r\n                    groupInterval: interval,\r\n                    isExpanded: index < groupInterval.length - 1\r\n                } : getIntervalSelector.bind(column, interval))\r\n            }));\r\n            return result\r\n        }\r\n        if (remoteGrouping) {\r\n            result = [{\r\n                selector: dataField,\r\n                isExpanded: false\r\n            }]\r\n        } else {\r\n            result = function(data) {\r\n                let result = column.calculateCellValue(data);\r\n                if (void 0 === result || \"\" === result) {\r\n                    result = null\r\n                }\r\n                return result\r\n            };\r\n            if (column.sortingMethod) {\r\n                result = [{\r\n                    selector: result,\r\n                    compare: column.sortingMethod.bind(column)\r\n                }]\r\n            }\r\n        }\r\n        return result\r\n    },\r\n    equalSortParameters(sortParameters1, sortParameters2, ignoreIsExpanded) {\r\n        sortParameters1 = normalizeSortingInfo(sortParameters1);\r\n        sortParameters2 = normalizeSortingInfo(sortParameters2);\r\n        if (Array.isArray(sortParameters1) && Array.isArray(sortParameters2)) {\r\n            if (sortParameters1.length !== sortParameters2.length) {\r\n                return false\r\n            }\r\n            for (let i = 0; i < sortParameters1.length; i++) {\r\n                if (!equalSelectors(sortParameters1[i].selector, sortParameters2[i].selector) || sortParameters1[i].desc !== sortParameters2[i].desc || sortParameters1[i].groupInterval !== sortParameters2[i].groupInterval || !ignoreIsExpanded && Boolean(sortParameters1[i].isExpanded) !== Boolean(sortParameters2[i].isExpanded)) {\r\n                    return false\r\n                }\r\n            }\r\n            return true\r\n        }\r\n        return (!sortParameters1 || !sortParameters1.length) === (!sortParameters2 || !sortParameters2.length)\r\n    },\r\n    getPointsByColumns(items, pointCreated) {\r\n        let isVertical = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : false;\r\n        let startColumnIndex = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 0;\r\n        let needToCheckPrevPoint = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : false;\r\n        const result = [];\r\n        const cellsLength = items.length;\r\n        let $item;\r\n        let offset = {\r\n            left: 0,\r\n            top: 0\r\n        };\r\n        let itemRect = {\r\n            width: 0,\r\n            height: 0\r\n        };\r\n        let columnIndex = startColumnIndex;\r\n        let rtlEnabled;\r\n        for (let i = 0; i <= cellsLength; i++) {\r\n            var _$item;\r\n            if (i < cellsLength) {\r\n                $item = items.eq(i);\r\n                offset = $item.offset();\r\n                itemRect = getBoundingRect($item.get(0));\r\n                rtlEnabled = \"rtl\" === $item.css(\"direction\")\r\n            }\r\n            const offsetRight = offset.left + itemRect.width;\r\n            const offsetBottom = offset.top + itemRect.height;\r\n            const pointProps = {\r\n                index: columnIndex,\r\n                columnIndex: columnIndex,\r\n                item: null === (_$item = $item) || void 0 === _$item ? void 0 : _$item.get(0),\r\n                x: !isVertical && rtlEnabled !== (i === cellsLength) ? offsetRight : offset.left,\r\n                y: isVertical && i === cellsLength ? offsetBottom : offset.top\r\n            };\r\n            if (!isVertical && i > 0) {\r\n                const prevItemOffset = items.eq(i - 1).offset();\r\n                const {\r\n                    width: prevItemWidth\r\n                } = getBoundingRect(items[i - 1]);\r\n                const prevItemOffsetX = rtlEnabled ? prevItemOffset.left : prevItemOffset.left + prevItemWidth;\r\n                if (prevItemOffset.top < pointProps.y) {\r\n                    pointProps.y = prevItemOffset.top\r\n                }\r\n                if (needToCheckPrevPoint && Math.round(prevItemOffsetX) !== Math.round(pointProps.x)) {\r\n                    const prevPointProps = _extends({}, pointProps, {\r\n                        item: items[i - 1],\r\n                        x: prevItemOffsetX\r\n                    });\r\n                    if (rtlEnabled) {\r\n                        pointProps.isRightBoundary = true;\r\n                        prevPointProps.isLeftBoundary = true\r\n                    } else {\r\n                        pointProps.isLeftBoundary = true;\r\n                        prevPointProps.isRightBoundary = true\r\n                    }\r\n                    addPointIfNeed(result, prevPointProps, pointCreated)\r\n                }\r\n            }\r\n            addPointIfNeed(result, pointProps, pointCreated);\r\n            columnIndex++\r\n        }\r\n        return result\r\n    },\r\n    getExpandCellTemplate: () => ({\r\n        allowRenderToDetachedContainer: true,\r\n        render(container, options) {\r\n            const $container = $(container);\r\n            if (isDefined(options.value) && !(options.data && options.data.isContinuation) && !options.row.isNewRow) {\r\n                const rowsView = options.component.getView(\"rowsView\");\r\n                $container.addClass(\"dx-datagrid-expand\").addClass(\"dx-selection-disabled\");\r\n                $(\"<div>\").addClass(options.value ? \"dx-datagrid-group-opened\" : \"dx-datagrid-group-closed\").appendTo($container);\r\n                rowsView.setAria(\"label\", options.value ? rowsView.localize(\"dxDataGrid-ariaCollapse\") : rowsView.localize(\"dxDataGrid-ariaExpand\"), $container)\r\n            } else {\r\n                setEmptyText($container)\r\n            }\r\n        }\r\n    }),\r\n    setEmptyText: setEmptyText,\r\n    isDateType: isDateType,\r\n    getSelectionRange(focusedElement) {\r\n        try {\r\n            if (focusedElement) {\r\n                return {\r\n                    selectionStart: focusedElement.selectionStart,\r\n                    selectionEnd: focusedElement.selectionEnd\r\n                }\r\n            }\r\n        } catch (e) {}\r\n        return {}\r\n    },\r\n    setSelectionRange(focusedElement, selectionRange) {\r\n        try {\r\n            if (focusedElement && focusedElement.setSelectionRange) {\r\n                focusedElement.setSelectionRange(selectionRange.selectionStart, selectionRange.selectionEnd)\r\n            }\r\n        } catch (e) {}\r\n    },\r\n    focusAndSelectElement(component, $element) {\r\n        const isFocused = $element.is(\":focus\");\r\n        eventsEngine.trigger($element, \"focus\");\r\n        const isSelectTextOnEditingStart = component.option(\"editing.selectTextOnEditStart\");\r\n        const element = $element.get(0);\r\n        if (!isFocused && isSelectTextOnEditingStart && $element.is(\".dx-texteditor-input\") && !$element.is(\"[readonly]\")) {\r\n            const editor = getWidgetInstance($element.closest(\".dx-texteditor\"));\r\n            when(editor && editor._loadItemDeferred).done((() => {\r\n                element.select()\r\n            }))\r\n        }\r\n    },\r\n    getWidgetInstance: getWidgetInstance,\r\n    getLastResizableColumnIndex(columns, resultWidths) {\r\n        const hasResizableColumns = columns.some((column => column && !column.command && !column.fixed && false !== column.allowResizing));\r\n        let lastColumnIndex;\r\n        for (lastColumnIndex = columns.length - 1; columns[lastColumnIndex]; lastColumnIndex--) {\r\n            const column = columns[lastColumnIndex];\r\n            const width = resultWidths && resultWidths[lastColumnIndex];\r\n            const allowResizing = !hasResizableColumns || false !== column.allowResizing;\r\n            if (!column.command && !column.fixed && \"adaptiveHidden\" !== width && allowResizing) {\r\n                break\r\n            }\r\n        }\r\n        return lastColumnIndex\r\n    },\r\n    isElementInCurrentGrid(controller, $element) {\r\n        if ($element && $element.length) {\r\n            const $grid = $element.closest(`.${controller.getWidgetContainerClass()}`).parent();\r\n            return $grid.is(controller.component.$element())\r\n        }\r\n        return false\r\n    },\r\n    isVirtualRowRendering(that) {\r\n        const rowRenderingMode = that.option(ROW_RENDERING_MODE_OPTION);\r\n        const isVirtualMode = \"virtual\" === that.option(\"scrolling.mode\");\r\n        const isAppendMode = \"infinite\" === that.option(\"scrolling.mode\");\r\n        if (false === that.option(LEGACY_SCROLLING_MODE) && (isVirtualMode || isAppendMode)) {\r\n            return true\r\n        }\r\n        return \"virtual\" === rowRenderingMode\r\n    },\r\n    getPixelRatio: window => window.devicePixelRatio || 1,\r\n    getContentHeightLimit(browser) {\r\n        if (browser.mozilla) {\r\n            return 8e6\r\n        }\r\n        return 15e6 / this.getPixelRatio(getWindow())\r\n    },\r\n    normalizeLookupDataSource(lookup) {\r\n        let lookupDataSourceOptions;\r\n        if (lookup.items) {\r\n            lookupDataSourceOptions = lookup.items\r\n        } else {\r\n            lookupDataSourceOptions = lookup.dataSource;\r\n            if (isFunction(lookupDataSourceOptions) && !variableWrapper.isWrapped(lookupDataSourceOptions)) {\r\n                lookupDataSourceOptions = lookupDataSourceOptions({})\r\n            }\r\n        }\r\n        return normalizeDataSourceOptions(lookupDataSourceOptions)\r\n    },\r\n    getWrappedLookupDataSource(column, dataSource, filter) {\r\n        if (!dataSource) {\r\n            return []\r\n        }\r\n        const lookupDataSourceOptions = this.normalizeLookupDataSource(column.lookup);\r\n        if (column.calculateCellValue !== column.defaultCalculateCellValue) {\r\n            return lookupDataSourceOptions\r\n        }\r\n        const hasGroupPaging = dataSource.remoteOperations().groupPaging;\r\n        const hasLookupOptimization = column.displayField && isString(column.displayField);\r\n        let cachedUniqueRelevantItems;\r\n        let previousTake;\r\n        let previousSkip;\r\n        const sliceItems = (items, loadOptions) => {\r\n            const start = loadOptions.skip ?? 0;\r\n            const end = loadOptions.take ? start + loadOptions.take : items.length;\r\n            return items.slice(start, end)\r\n        };\r\n        const lookupDataSource = _extends({}, lookupDataSourceOptions, {\r\n            __dataGridSourceFilter: filter,\r\n            load: loadOptions => {\r\n                const d = new Deferred;\r\n                (loadOptions => {\r\n                    const group = normalizeGroupingLoadOptions(hasLookupOptimization ? [column.dataField, column.displayField] : column.dataField);\r\n                    const d = new Deferred;\r\n                    const canUseCache = cachedUniqueRelevantItems && (!hasGroupPaging || loadOptions.skip === previousSkip && loadOptions.take === previousTake);\r\n                    if (canUseCache) {\r\n                        d.resolve(sliceItems(cachedUniqueRelevantItems, loadOptions))\r\n                    } else {\r\n                        previousSkip = loadOptions.skip;\r\n                        previousTake = loadOptions.take;\r\n                        dataSource.load({\r\n                            filter: filter,\r\n                            group: group,\r\n                            take: hasGroupPaging ? loadOptions.take : void 0,\r\n                            skip: hasGroupPaging ? loadOptions.skip : void 0\r\n                        }).done((items => {\r\n                            cachedUniqueRelevantItems = items;\r\n                            d.resolve(hasGroupPaging ? items : sliceItems(items, loadOptions))\r\n                        })).fail(d.fail)\r\n                    }\r\n                    return d\r\n                })(loadOptions).done((items => {\r\n                    if (0 === items.length) {\r\n                        d.resolve([]);\r\n                        return\r\n                    }\r\n                    const filter = this.combineFilters(items.flatMap((data => data.key)).map((key => [column.lookup.valueExpr, key])), \"or\");\r\n                    const newDataSource = new DataSource(_extends({}, lookupDataSourceOptions, loadOptions, {\r\n                        filter: this.combineFilters([filter, loadOptions.filter], \"and\"),\r\n                        paginate: false\r\n                    }));\r\n                    newDataSource.load().done(d.resolve).fail(d.fail)\r\n                })).fail(d.fail);\r\n                return d\r\n            },\r\n            key: column.lookup.valueExpr,\r\n            byKey(key) {\r\n                const d = Deferred();\r\n                this.load({\r\n                    filter: [column.lookup.valueExpr, \"=\", key]\r\n                }).done((arr => {\r\n                    d.resolve(arr[0])\r\n                }));\r\n                return d.promise()\r\n            }\r\n        });\r\n        return lookupDataSource\r\n    },\r\n    logHeaderFilterDeprecatedWarningIfNeed(component) {\r\n        const logWarning = component._logDeprecatedOptionWarning.bind(component);\r\n        if (isDefined(component.option(\"headerFilter.allowSearch\"))) {\r\n            logWarning(\"headerFilter.allowSearch\", {\r\n                since: \"23.1\",\r\n                alias: \"headerFilter.search.enabled\"\r\n            })\r\n        }\r\n        if (isDefined(component.option(\"headerFilter.searchTimeout\"))) {\r\n            logWarning(\"headerFilter.searchTimeout\", {\r\n                since: \"23.1\",\r\n                alias: \"headerFilter.search.timeout\"\r\n            })\r\n        }\r\n        const specificName = \"dxPivotGrid\" === component.NAME ? \"dataSource.fields\" : \"columns\";\r\n        const columns = component.option(specificName);\r\n        if (!Array.isArray(columns)) {\r\n            return\r\n        }\r\n        const logSpecificDeprecatedWarningIfNeed = columns => {\r\n            columns.forEach((column => {\r\n                var _column$columns;\r\n                const headerFilter = column.headerFilter || {};\r\n                if (isDefined(headerFilter.allowSearch)) {\r\n                    logWarning(`${specificName}[].headerFilter.allowSearch`, {\r\n                        since: \"23.1\",\r\n                        alias: `${specificName}[].headerFilter.search.enabled`\r\n                    })\r\n                }\r\n                if (isDefined(headerFilter.searchMode)) {\r\n                    logWarning(`${specificName}[].headerFilter.searchMode`, {\r\n                        since: \"23.1\",\r\n                        alias: `${specificName}[].headerFilter.search.mode`\r\n                    })\r\n                }\r\n                if (null !== (_column$columns = column.columns) && void 0 !== _column$columns && _column$columns.length) {\r\n                    logSpecificDeprecatedWarningIfNeed(column.columns)\r\n                }\r\n            }))\r\n        };\r\n        logSpecificDeprecatedWarningIfNeed(columns)\r\n    },\r\n    getComponentBorderWidth(that, $rowsViewElement) {\r\n        const borderWidth = that.option(\"showBorders\") ? Math.ceil(getOuterWidth($rowsViewElement) - getInnerWidth($rowsViewElement)) : 0;\r\n        return borderWidth\r\n    },\r\n    isCustomCommandColumn(columns, commandColumn) {\r\n        const customCommandColumns = columns.filter((column => column.type === commandColumn.type));\r\n        return !!customCommandColumns.length\r\n    }\r\n};\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAOA,QAAQ,MAAM,oCAAoC;AACzD,OAAOC,YAAY,MAAM,gDAAgD;AACzE,OAAOC,UAAU,MAAM,kCAAkC;AACzD,SACIC,0BAA0B,QACvB,wCAAwC;AAC/C,SACIC,oBAAoB,IAAIC,2BAA2B,QAChD,4BAA4B;AACnC,OAAOC,CAAC,MAAM,wBAAwB;AACtC,SACIC,YAAY,QACT,4BAA4B;AACnC,SACIC,YAAY,QACT,0BAA0B;AACjC,SACIC,QAAQ,EACRC,IAAI,QACD,8BAA8B;AACrC,SACIC,MAAM,QACH,4BAA4B;AACnC,SACIC,IAAI,QACD,8BAA8B;AACrC,SACIC,eAAe,QACZ,8BAA8B;AACrC,SACIC,SAAS,EACTC,aAAa,EACbC,aAAa,QACV,0BAA0B;AACjC,SACIC,MAAM,QACH,4BAA4B;AACnC,SACIC,SAAS,EACTC,UAAU,EACVC,QAAQ,QACL,0BAA0B;AACjC,OAAOC,eAAe,MAAM,sCAAsC;AAClE,SACIC,SAAS,QACN,4BAA4B;AACnC,OAAOC,YAAY,MAAM,wBAAwB;AACjD,OAAOC,SAAS,MAAM,wBAAwB;AAC9C,OAAOC,eAAe,MAAM,8BAA8B;AAC1D,MAAMC,iCAAiC,GAAG,uBAAuB;AACjE,MAAMC,2BAA2B,GAAG,0BAA0B;AAC9D,MAAMC,2BAA2B,GAAG,0BAA0B;AAC9D,MAAMC,qBAAqB,GAAG,oBAAoB;AAClD,MAAMC,aAAa,GAAG,QAAQ;AAC9B,MAAMC,uBAAuB,GAAG,UAAU;AAC1C,MAAMC,sBAAsB,GAAG,SAAS;AACxC,MAAMC,qBAAqB,GAAG,sBAAsB;AACpD,MAAMC,qBAAqB,GAAG,gBAAgB;AAC9C,MAAMC,yBAAyB,GAAG,4BAA4B;AAC9D,MAAMC,uBAAuB,GAAG;EAC5BC,IAAI,EAAEC,KAAK,IAAIA,KAAK,IAAIA,KAAK,CAACC,WAAW,CAAC,CAAC;EAC3CC,KAAK,EAAEF,KAAK,IAAIA,KAAK,IAAIA,KAAK,CAACG,QAAQ,CAAC,CAAC,GAAG,CAAC;EAC7CC,GAAG,EAAEJ,KAAK,IAAIA,KAAK,IAAIA,KAAK,CAACK,OAAO,CAAC,CAAC;EACtCC,OAAO,EAAEN,KAAK,IAAIA,KAAK,IAAIO,IAAI,CAACC,KAAK,CAACR,KAAK,CAACG,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC;EAC/DM,IAAI,EAAET,KAAK,IAAIA,KAAK,IAAIA,KAAK,CAACU,QAAQ,CAAC,CAAC;EACxCC,MAAM,EAAEX,KAAK,IAAIA,KAAK,IAAIA,KAAK,CAACY,UAAU,CAAC,CAAC;EAC5CC,MAAM,EAAEb,KAAK,IAAIA,KAAK,IAAIA,KAAK,CAACc,UAAU,CAAC;AAC/C,CAAC;AACD,MAAMC,mBAAmB,GAAG,SAAAA,CAAA,EAAW;EACnC,MAAMC,IAAI,GAAGC,SAAS,CAAC,CAAC,CAAC;EACzB,MAAMjB,KAAK,GAAG,IAAI,CAACkB,kBAAkB,CAACF,IAAI,CAAC;EAC3C,IAAI,CAACpC,SAAS,CAACoB,KAAK,CAAC,EAAE;IACnB,OAAO,IAAI;EACf;EACA,IAAImB,UAAU,CAAC,IAAI,CAACC,QAAQ,CAAC,EAAE;IAC3B,MAAMC,oBAAoB,GAAGJ,SAAS,CAAC,CAAC,CAAC;IACzC,OAAOnB,uBAAuB,CAACuB,oBAAoB,CAAC,CAACrB,KAAK,CAAC;EAC/D;EACA,IAAI,QAAQ,KAAK,IAAI,CAACoB,QAAQ,EAAE;IAC5B,MAAME,aAAa,GAAGL,SAAS,CAAC,CAAC,CAAC;IAClC,OAAOV,IAAI,CAACC,KAAK,CAACe,MAAM,CAACvB,KAAK,CAAC,GAAGsB,aAAa,CAAC,GAAGA,aAAa;EACpE;AACJ,CAAC;AACD,MAAME,cAAc,GAAG,SAAAA,CAASC,SAAS,EAAEC,SAAS,EAAE;EAClD,IAAI7C,UAAU,CAAC4C,SAAS,CAAC,IAAI5C,UAAU,CAAC6C,SAAS,CAAC,EAAE;IAChD,IAAID,SAAS,CAACE,gBAAgB,IAAID,SAAS,CAACC,gBAAgB,EAAE;MAC1D,OAAOF,SAAS,CAACE,gBAAgB,KAAKD,SAAS,CAACC,gBAAgB,IAAIF,SAAS,CAACG,WAAW,KAAKF,SAAS,CAACE,WAAW;IACvH;EACJ;EACA,OAAOH,SAAS,KAAKC,SAAS;AAClC,CAAC;AAED,SAASP,UAAUA,CAACC,QAAQ,EAAE;EAC1B,OAAO,MAAM,KAAKA,QAAQ,IAAI,UAAU,KAAKA,QAAQ;AACzD;AACA,MAAMS,YAAY,GAAG,SAAAA,CAASC,UAAU,EAAE;EACtCA,UAAU,CAACC,GAAG,CAAC,CAAC,CAAC,CAACC,WAAW,GAAG,MAAM;AAC1C,CAAC;AACD,MAAMlE,oBAAoB,GAAG,SAAAA,CAASmE,IAAI,EAAE;EACxCA,IAAI,GAAGA,IAAI,IAAI,EAAE;EACjB,MAAMC,MAAM,GAAGnE,2BAA2B,CAACkE,IAAI,CAAC;EAChD,KAAK,IAAIE,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,IAAI,CAACG,MAAM,EAAED,CAAC,EAAE,EAAE;IAClC,IAAIF,IAAI,IAAIA,IAAI,CAACE,CAAC,CAAC,IAAI,KAAK,CAAC,KAAKF,IAAI,CAACE,CAAC,CAAC,CAACE,UAAU,EAAE;MAClDH,MAAM,CAACC,CAAC,CAAC,CAACE,UAAU,GAAGJ,IAAI,CAACE,CAAC,CAAC,CAACE,UAAU;IAC7C;IACA,IAAIJ,IAAI,IAAIA,IAAI,CAACE,CAAC,CAAC,IAAI,KAAK,CAAC,KAAKF,IAAI,CAACE,CAAC,CAAC,CAACb,aAAa,EAAE;MACrDY,MAAM,CAACC,CAAC,CAAC,CAACb,aAAa,GAAGW,IAAI,CAACE,CAAC,CAAC,CAACb,aAAa;IACnD;EACJ;EACA,OAAOY,MAAM;AACjB,CAAC;AACD,MAAMI,WAAW,GAAG,SAAAA,CAAStC,KAAK,EAAEuC,OAAO,EAAE;EACzC,MAAMC,SAAS,GAAGvD,YAAY,CAACN,MAAM,CAACqB,KAAK,EAAEuC,OAAO,CAAC5D,MAAM,CAAC,IAAIqB,KAAK,IAAIA,KAAK,CAACyC,QAAQ,CAAC,CAAC,IAAI,EAAE;EAC/F,MAAMC,YAAY,GAAG;IACjB1C,KAAK,EAAEA,KAAK;IACZwC,SAAS,EAAED,OAAO,CAACI,gBAAgB,GAAGJ,OAAO,CAACI,gBAAgB,CAACH,SAAS,CAAC,GAAGA,SAAS;IACrFI,MAAM,EAAEL,OAAO,CAACK,MAAM,IAAI,KAAK;IAC/BtB,aAAa,EAAEiB,OAAO,CAACjB;EAC3B,CAAC;EACD,OAAOiB,OAAO,CAACM,aAAa,GAAGN,OAAO,CAACM,aAAa,CAACC,IAAI,CAACP,OAAO,EAAEG,YAAY,CAAC,GAAGA,YAAY,CAACF,SAAS;AAC7G,CAAC;AACD,MAAMO,cAAc,GAAG,SAAAA,CAASC,WAAW,EAAEC,YAAY,EAAE;EACvD,MAAMC,aAAa,GAAGF,WAAW,CAACE,aAAa,IAAIF,WAAW,CAACG,aAAa,IAAIF,YAAY,CAAC,GAAGD,WAAW,CAACI,WAAW,aAAa,CAAC,IAAIH,YAAY,CAACD,WAAW,CAACI,WAAW,CAAC;EAC9K,OAAOd,WAAW,CAACU,WAAW,CAAChD,KAAK,EAAE;IAClCrB,MAAM,EAAEqE,WAAW,CAACK,WAAW;IAC/BV,gBAAgB,EAAEH,SAAS,IAAIU,aAAa,GAAGvE,MAAM,CAACuE,aAAa,EAAEV,SAAS,EAAEQ,WAAW,CAACG,aAAa,CAAC,GAAGX,SAAS;IACtHK,aAAa,EAAEG,WAAW,CAACH;EAC/B,CAAC,CAAC;AACN,CAAC;AACD,MAAMS,iBAAiB,GAAG,SAAAA,CAASC,QAAQ,EAAE;EACzC,MAAMC,UAAU,GAAGD,QAAQ,CAACvC,IAAI,IAAIuC,QAAQ,CAACvC,IAAI,CAAC,CAAC;EACnD,MAAMyC,YAAY,GAAGD,UAAU,IAAIA,UAAU,CAACC,YAAY;EAC1D,MAAMC,UAAU,GAAGD,YAAY,IAAIA,YAAY,CAAC,CAAC,CAAC;EAClD,OAAOC,UAAU,IAAIF,UAAU,CAACE,UAAU,CAAC;AAC/C,CAAC;AACD,MAAMC,qBAAqB,GAAG,SAAAA,CAASC,OAAO,EAAEC,OAAO,EAAEC,UAAU,EAAE;EACjE,IAAIC,KAAK,CAACC,OAAO,CAACJ,OAAO,CAAC,IAAIG,KAAK,CAACC,OAAO,CAACH,OAAO,CAAC,EAAE;IAClD,IAAID,OAAO,CAACxB,MAAM,KAAKyB,OAAO,CAACzB,MAAM,EAAE;MACnC,OAAO,KAAK;IAChB;IACA,KAAK,IAAID,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGyB,OAAO,CAACxB,MAAM,EAAED,CAAC,EAAE,EAAE;MACrC,IAAI,CAACwB,qBAAqB,CAACC,OAAO,CAACzB,CAAC,CAAC,EAAE0B,OAAO,CAAC1B,CAAC,CAAC,EAAE2B,UAAU,CAAC,EAAE;QAC5D,OAAO,KAAK;MAChB;IACJ;IACA,OAAO,IAAI;EACf;EACA,IAAIjF,UAAU,CAAC+E,OAAO,CAAC,IAAIA,OAAO,CAAChC,WAAW,IAAI,CAAC,IAAI/C,UAAU,CAACgF,OAAO,CAAC,IAAIA,OAAO,CAACjC,WAAW,IAAI,CAAC,EAAE;IACpG,OAAOgC,OAAO,CAAChC,WAAW,KAAKiC,OAAO,CAACjC,WAAW,IAAI1D,YAAY,CAAC0F,OAAO,CAACK,WAAW,EAAE,KAAK,CAAC,EAAEH,UAAU,CAAC,KAAK5F,YAAY,CAAC2F,OAAO,CAACI,WAAW,EAAE,KAAK,CAAC,EAAEH,UAAU,CAAC,IAAI5F,YAAY,CAAC0F,OAAO,CAACM,uBAAuB,EAAE,KAAK,CAAC,EAAEJ,UAAU,CAAC,KAAK5F,YAAY,CAAC2F,OAAO,CAACK,uBAAuB,EAAE,KAAK,CAAC,EAAEJ,UAAU,CAAC;EACpT;EACA,OAAO5F,YAAY,CAAC0F,OAAO,EAAE,KAAK,CAAC,EAAEE,UAAU,CAAC,IAAI5F,YAAY,CAAC2F,OAAO,EAAE,KAAK,CAAC,EAAEC,UAAU,CAAC;AACjG,CAAC;AACD,MAAMK,WAAW,GAAG5B,OAAO,KAAK;EAC5B6B,KAAK,EAAE7B,OAAO,CAAC6B,KAAK;EACpBxC,WAAW,EAAEW,OAAO,CAACX,WAAW;EAChCyC,CAAC,EAAE9B,OAAO,CAAC8B,CAAC;EACZC,CAAC,EAAE/B,OAAO,CAAC+B;AACf,CAAC,CAAC;AACF,MAAMC,cAAc,GAAGA,CAACC,MAAM,EAAEC,UAAU,EAAEC,YAAY,KAAK;EACzD,IAAIC,cAAc,GAAG,KAAK;EAC1B,IAAID,YAAY,EAAE;IACdC,cAAc,GAAGD,YAAY,CAACD,UAAU,CAAC;EAC7C;EACA,IAAI,CAACE,cAAc,EAAE;IACjB,MAAMC,KAAK,GAAGT,WAAW,CAACM,UAAU,CAAC;IACrCD,MAAM,CAACK,IAAI,CAACD,KAAK,CAAC;EACtB;AACJ,CAAC;AAED,SAASE,4BAA4BA,CAACC,KAAK,EAAE;EACzC,IAAI,CAAChB,KAAK,CAACC,OAAO,CAACe,KAAK,CAAC,EAAE;IACvBA,KAAK,GAAG,CAACA,KAAK,CAAC;EACnB;EACA,OAAOA,KAAK,CAACC,GAAG,CAAE,CAACC,IAAI,EAAE9C,CAAC,KAAK;IAC3B,IAAIrD,QAAQ,CAACmG,IAAI,CAAC,EAAE;MAChB,OAAO;QACHC,QAAQ,EAAED,IAAI;QACd5C,UAAU,EAAEF,CAAC,GAAG4C,KAAK,CAAC3C,MAAM,GAAG;MACnC,CAAC;IACL;IACA,OAAO6C,IAAI;EACf,CAAE,CAAC;AACP;AACA,eAAe;EACXE,gBAAgBA,CAAC5B,QAAQ,EAAE;IACvB,MAAM6B,IAAI,GAAG,IAAI;IACjB7B,QAAQ,GAAGA,QAAQ,IAAI,IAAI,CAAC8B,OAAO,CAAC,CAAC;IACrC,IAAI,CAAC9B,QAAQ,EAAE;MACX;IACJ;IACA,MAAM+B,WAAW,GAAGF,IAAI,CAACG,eAAe,CAAC,QAAQ,CAAC;IAClD,IAAIC,aAAa,GAAGjC,QAAQ,CAACkC,IAAI,CAAC,IAAIH,WAAW,EAAE,CAAC,CAACI,IAAI,CAAC,CAAC;IAC3D,MAAMC,SAAS,GAAG,IAAI,CAACC,eAAe,CAACC,OAAO,CAAC,CAAC;IAChD,MAAMC,SAAS,GAAG,IAAI,CAACF,eAAe,CAACE,SAAS,CAAC,CAAC;IAClD,IAAI,CAACN,aAAa,CAACpD,MAAM,EAAE;MACvBoD,aAAa,GAAGxH,CAAC,CAAC,QAAQ,CAAC,CAAC+H,QAAQ,CAACT,WAAW,CAAC;IACrD;IACA,IAAI,CAACE,aAAa,CAACQ,MAAM,CAAC,CAAC,CAACC,EAAE,CAAC1C,QAAQ,CAAC,EAAE;MACtCiC,aAAa,CAACU,QAAQ,CAAC3C,QAAQ,CAAC;IACpC;IACA,IAAIoC,SAAS,IAAI,CAACG,SAAS,EAAE;MACzBN,aAAa,CAACW,WAAW,CAAC,WAAW,CAAC,CAACC,IAAI,CAAChB,IAAI,CAACiB,cAAc,CAAC,CAAC,CAAC;IACtE,CAAC,MAAM;MACHb,aAAa,CAACO,QAAQ,CAAC,WAAW,CAAC;IACvC;EACJ,CAAC;EACDO,eAAeA,CAAC/C,QAAQ,EAAEzB,UAAU,EAAEyE,YAAY,EAAE;IAChD,MAAMnB,IAAI,GAAG,IAAI;IACjB,IAAIoB,gBAAgB;IACpBpB,IAAI,CAACqB,UAAU,IAAIrB,IAAI,CAACqB,UAAU,CAAClD,QAAQ,CAAC,CAAC,CAACmD,MAAM,CAAC,CAAC;IACtDF,gBAAgB,GAAGpB,IAAI,CAACuB,MAAM,CAAC,WAAW,CAAC;IAC3C,IAAIH,gBAAgB,KAAK,MAAM,KAAKA,gBAAgB,CAACI,OAAO,GAAG,CAACL,YAAY,GAAGC,gBAAgB,CAACI,OAAO,CAAC,EAAE;MACtGJ,gBAAgB,GAAGnI,MAAM,CAAC;QACtBwI,OAAO,EAAE,KAAK;QACdC,OAAO,EAAEN,gBAAgB,CAACJ,IAAI;QAC9BW,SAAS,EAAEjF;MACf,CAAC,EAAE0E,gBAAgB,CAAC;MACpBpB,IAAI,CAACqB,UAAU,GAAGrB,IAAI,CAAC4B,gBAAgB,CAAChJ,CAAC,CAAC,OAAO,CAAC,CAACkI,QAAQ,CAACpE,UAAU,CAAC,EAAE5C,SAAS,EAAEsH,gBAAgB,CAAC;IACzG,CAAC,MAAM;MACHpB,IAAI,CAACqB,UAAU,GAAG,IAAI;IAC1B;EACJ,CAAC;EACDQ,0BAA0BA,CAAC1D,QAAQ,EAAE;IACjC,MAAM2D,OAAO,GAAGlJ,CAAC,CAACgB,SAAS,CAAC,CAAC,CAAC;IAC9B,IAAIR,SAAS,CAAC+E,QAAQ,CAAC,GAAG/E,SAAS,CAAC0I,OAAO,CAAC,EAAE;MAC1C,OAAO;QACHC,EAAE,EAAED,OAAO;QACXE,QAAQ,EAAE7D,QAAQ;QAClB8D,SAAS,EAAE;MACf,CAAC;IACL;IACA,OAAO;MACHF,EAAE,EAAE5D;IACR,CAAC;EACL,CAAC;EACD+D,aAAaA,CAACC,GAAG,EAAEC,KAAK,EAAEC,OAAO,EAAE;IAC/B,IAAIrD,KAAK,GAAG,CAAC,CAAC;IACd,IAAI,KAAK,CAAC,KAAKmD,GAAG,IAAIxD,KAAK,CAACC,OAAO,CAACwD,KAAK,CAAC,EAAE;MACxCC,OAAO,GAAGxG,SAAS,CAACmB,MAAM,IAAI,CAAC,GAAG,KAAK,GAAGqF,OAAO;MACjD,KAAK,IAAItF,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGqF,KAAK,CAACpF,MAAM,EAAED,CAAC,EAAE,EAAE;QACnC,MAAM8C,IAAI,GAAGrG,SAAS,CAAC6I,OAAO,CAAC,GAAGD,KAAK,CAACrF,CAAC,CAAC,CAACsF,OAAO,CAAC,GAAGD,KAAK,CAACrF,CAAC,CAAC;QAC9D,IAAIlE,YAAY,CAACsJ,GAAG,EAAEtC,IAAI,CAAC,EAAE;UACzBb,KAAK,GAAGjC,CAAC;UACT;QACJ;MACJ;IACJ;IACA,OAAOiC,KAAK;EAChB,CAAC;EACDsD,cAAcA,CAACC,OAAO,EAAEC,SAAS,EAAE;IAC/B,IAAIC,YAAY,GAAG,EAAE;IACrBD,SAAS,GAAGA,SAAS,IAAI,KAAK;IAC9B,KAAK,IAAIzF,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGwF,OAAO,CAACvF,MAAM,EAAED,CAAC,EAAE,EAAE;MACrC,IAAI2F,UAAU;MACd,IAAI,CAACH,OAAO,CAACxF,CAAC,CAAC,EAAE;QACb;MACJ;MACA,IAAI,CAAC,MAAM,IAAI,MAAM2F,UAAU,GAAGH,OAAO,CAACxF,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC,KAAK2F,UAAU,GAAG,KAAK,CAAC,GAAGA,UAAU,CAAC1F,MAAM,CAAC,IAAI,GAAG,KAAKuF,OAAO,CAACxF,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;QAC3H,IAAI,KAAK,KAAKyF,SAAS,EAAE;UACrB,OAAO,CAAC,GAAG,CAAC;QAChB;QACA,IAAI,IAAI,KAAKA,SAAS,EAAE;UACpB;QACJ;MACJ;MACA,IAAIC,YAAY,CAACzF,MAAM,EAAE;QACrByF,YAAY,CAAChD,IAAI,CAAC+C,SAAS,CAAC;MAChC;MACAC,YAAY,CAAChD,IAAI,CAAC8C,OAAO,CAACxF,CAAC,CAAC,CAAC;IACjC;IACA,IAAI,CAAC,KAAK0F,YAAY,CAACzF,MAAM,EAAE;MAC3ByF,YAAY,GAAGA,YAAY,CAAC,CAAC,CAAC;IAClC;IACA,IAAIA,YAAY,CAACzF,MAAM,EAAE;MACrB,OAAOyF,YAAY;IACvB;IACA;EACJ,CAAC;EACDE,YAAYA,CAACC,OAAO,EAAEC,WAAW,EAAE;IAC/B,IAAIC,2BAA2B,GAAG,CAAC;IACnC,KAAK,IAAI/F,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG8F,WAAW,CAAC7F,MAAM,EAAED,CAAC,EAAE,EAAE;MACzC,IAAI6F,OAAO,CAACC,WAAW,CAAC9F,CAAC,CAAC,CAAC,EAAE;QACzB+F,2BAA2B,EAAE;MACjC;IACJ;IACA,OAAOF,OAAO,CAAC5F,MAAM,IAAI4F,OAAO,CAAC5F,MAAM,KAAK8F,2BAA2B;EAC3E,CAAC;EACDvE,qBAAqB,EAAEA,qBAAqB;EAC5CwE,WAAWA,CAACC,QAAQ,EAAEC,UAAU,EAAEC,aAAa,EAAE;IAC7C,IAAI,CAACF,QAAQ,CAACC,UAAU,CAAC,EAAE;MACvBD,QAAQ,CAACC,UAAU,CAAC,GAAG,YAAW;QAC9B,MAAME,UAAU,GAAG,IAAI,CAACC,WAAW;QACnC,OAAOD,UAAU,GAAGA,UAAU,CAACF,UAAU,CAAC,CAACI,KAAK,CAACF,UAAU,EAAEtH,SAAS,CAAC,GAAGqH,aAAa;MAC3F,CAAC;IACL;EACJ,CAAC;EACDhG,WAAW,EAAEA,WAAW;EACxBoG,wBAAwB,EAAEA,CAACC,MAAM,EAAE/F,MAAM,MAAM;IAC3CjE,MAAM,EAAEgK,MAAM,CAAChK,MAAM;IACrBgE,gBAAgB,EAAEgG,MAAM,CAAChG,gBAAgB;IACzCE,aAAa,EAAE8F,MAAM,CAAC9F,aAAa;IACnCD,MAAM,EAAEA,MAAM;IACdgG,QAAQ,EAAED,MAAM,CAACC,QAAQ;IACzBC,SAAS,EAAEF,MAAM,CAACE;EACtB,CAAC,CAAC;EACFC,eAAeA,CAACH,MAAM,EAAE3I,KAAK,EAAEgB,IAAI,EAAE+H,OAAO,EAAE;IAC1C,IAAIJ,MAAM,CAACK,eAAe,IAAI,KAAK,CAAC,KAAKL,MAAM,CAACK,eAAe,CAAChJ,KAAK,CAAC,EAAE;MACpE,OAAO2I,MAAM,CAACK,eAAe,CAAChJ,KAAK,CAAC;IACxC;IACA,IAAI2I,MAAM,CAACM,qBAAqB,IAAIjI,IAAI,IAAI,OAAO,KAAK+H,OAAO,EAAE;MAC7D,OAAOJ,MAAM,CAACM,qBAAqB,CAACjI,IAAI,CAAC;IAC7C;IACA,IAAI2H,MAAM,CAACO,MAAM,IAAI,EAAE,OAAO,KAAKH,OAAO,KAAKJ,MAAM,CAACQ,mBAAmB,IAAIR,MAAM,CAACM,qBAAqB,CAAC,CAAC,EAAE;MACzG,OAAON,MAAM,CAACO,MAAM,CAAChI,kBAAkB,CAAClB,KAAK,CAAC;IAClD;IACA,OAAOA,KAAK;EAChB,CAAC;EACDoJ,sBAAsBA,CAACC,YAAY,EAAEpG,YAAY,EAAE;IAC/C,IAAIf,MAAM,GAAG,GAAG;IAChB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGkH,YAAY,CAACjH,MAAM,EAAED,CAAC,EAAE,EAAE;MAC1C,MAAMa,WAAW,GAAGqG,YAAY,CAAClH,CAAC,CAAC;MACnCD,MAAM,IAAI,CAACC,CAAC,GAAG,CAAC,GAAG,IAAI,GAAG,EAAE,IAAIY,cAAc,CAACC,WAAW,EAAEC,YAAY,CAAC;IAC7E;IACA,OAAOf,MAAM,GAAG,GAAG;EACvB,CAAC;EACDa,cAAc,EAAEA,cAAc;EAC9BjF,oBAAoB,EAAEA,oBAAoB;EAC1CwL,mBAAmBA,CAAClI,QAAQ,EAAE;IAC1B,QAAQA,QAAQ;MACZ,KAAK,MAAM;QACP,OAAO,WAAW;MACtB,KAAK,UAAU;QACX,OAAO,oBAAoB;MAC/B;QACI;IACR;EACJ,CAAC;EACDmI,8BAA8BA,CAACZ,MAAM,EAAEa,cAAc,EAAE;IACnD,IAAItH,MAAM,GAAG,EAAE;IACf,MAAMuH,SAAS,GAAGd,MAAM,CAACc,SAAS,IAAId,MAAM,CAACe,IAAI;IACjD,MAAMpI,aAAa,GAAGnC,eAAe,CAACwK,gBAAgB,CAAChB,MAAM,CAAC;IAC9D,IAAIrH,aAAa,EAAE;MACfhD,IAAI,CAACgD,aAAa,EAAG,CAAC8C,KAAK,EAAEwF,QAAQ,KAAK;QACtC1H,MAAM,CAAC2C,IAAI,CAAC2E,cAAc,GAAG;UACzBtE,QAAQ,EAAEuE,SAAS;UACnBnI,aAAa,EAAEsI,QAAQ;UACvBvH,UAAU,EAAE+B,KAAK,GAAG9C,aAAa,CAACc,MAAM,GAAG;QAC/C,CAAC,GAAGrB,mBAAmB,CAAC8I,IAAI,CAAClB,MAAM,EAAEiB,QAAQ,CAAC,CAAC;MACnD,CAAE,CAAC;MACH,OAAO1H,MAAM;IACjB;IACA,IAAIsH,cAAc,EAAE;MAChBtH,MAAM,GAAG,CAAC;QACNgD,QAAQ,EAAEuE,SAAS;QACnBpH,UAAU,EAAE;MAChB,CAAC,CAAC;IACN,CAAC,MAAM;MACHH,MAAM,GAAG,SAAAA,CAASlB,IAAI,EAAE;QACpB,IAAIkB,MAAM,GAAGyG,MAAM,CAACzH,kBAAkB,CAACF,IAAI,CAAC;QAC5C,IAAI,KAAK,CAAC,KAAKkB,MAAM,IAAI,EAAE,KAAKA,MAAM,EAAE;UACpCA,MAAM,GAAG,IAAI;QACjB;QACA,OAAOA,MAAM;MACjB,CAAC;MACD,IAAIyG,MAAM,CAACmB,aAAa,EAAE;QACtB5H,MAAM,GAAG,CAAC;UACNgD,QAAQ,EAAEhD,MAAM;UAChB6H,OAAO,EAAEpB,MAAM,CAACmB,aAAa,CAACD,IAAI,CAAClB,MAAM;QAC7C,CAAC,CAAC;MACN;IACJ;IACA,OAAOzG,MAAM;EACjB,CAAC;EACD8H,mBAAmBA,CAACC,eAAe,EAAEC,eAAe,EAAEC,gBAAgB,EAAE;IACpEF,eAAe,GAAGnM,oBAAoB,CAACmM,eAAe,CAAC;IACvDC,eAAe,GAAGpM,oBAAoB,CAACoM,eAAe,CAAC;IACvD,IAAInG,KAAK,CAACC,OAAO,CAACiG,eAAe,CAAC,IAAIlG,KAAK,CAACC,OAAO,CAACkG,eAAe,CAAC,EAAE;MAClE,IAAID,eAAe,CAAC7H,MAAM,KAAK8H,eAAe,CAAC9H,MAAM,EAAE;QACnD,OAAO,KAAK;MAChB;MACA,KAAK,IAAID,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG8H,eAAe,CAAC7H,MAAM,EAAED,CAAC,EAAE,EAAE;QAC7C,IAAI,CAACX,cAAc,CAACyI,eAAe,CAAC9H,CAAC,CAAC,CAAC+C,QAAQ,EAAEgF,eAAe,CAAC/H,CAAC,CAAC,CAAC+C,QAAQ,CAAC,IAAI+E,eAAe,CAAC9H,CAAC,CAAC,CAACiI,IAAI,KAAKF,eAAe,CAAC/H,CAAC,CAAC,CAACiI,IAAI,IAAIH,eAAe,CAAC9H,CAAC,CAAC,CAACb,aAAa,KAAK4I,eAAe,CAAC/H,CAAC,CAAC,CAACb,aAAa,IAAI,CAAC6I,gBAAgB,IAAIE,OAAO,CAACJ,eAAe,CAAC9H,CAAC,CAAC,CAACE,UAAU,CAAC,KAAKgI,OAAO,CAACH,eAAe,CAAC/H,CAAC,CAAC,CAACE,UAAU,CAAC,EAAE;UACrT,OAAO,KAAK;QAChB;MACJ;MACA,OAAO,IAAI;IACf;IACA,OAAO,CAAC,CAAC4H,eAAe,IAAI,CAACA,eAAe,CAAC7H,MAAM,OAAO,CAAC8H,eAAe,IAAI,CAACA,eAAe,CAAC9H,MAAM,CAAC;EAC1G,CAAC;EACDkI,kBAAkBA,CAAC9C,KAAK,EAAE9C,YAAY,EAAE;IACpC,IAAI6F,UAAU,GAAGtJ,SAAS,CAACmB,MAAM,GAAG,CAAC,IAAI,KAAK,CAAC,KAAKnB,SAAS,CAAC,CAAC,CAAC,GAAGA,SAAS,CAAC,CAAC,CAAC,GAAG,KAAK;IACvF,IAAIuJ,gBAAgB,GAAGvJ,SAAS,CAACmB,MAAM,GAAG,CAAC,IAAI,KAAK,CAAC,KAAKnB,SAAS,CAAC,CAAC,CAAC,GAAGA,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC;IACzF,IAAIwJ,oBAAoB,GAAGxJ,SAAS,CAACmB,MAAM,GAAG,CAAC,IAAI,KAAK,CAAC,KAAKnB,SAAS,CAAC,CAAC,CAAC,GAAGA,SAAS,CAAC,CAAC,CAAC,GAAG,KAAK;IACjG,MAAMiB,MAAM,GAAG,EAAE;IACjB,MAAMwI,WAAW,GAAGlD,KAAK,CAACpF,MAAM;IAChC,IAAIuI,KAAK;IACT,IAAIC,MAAM,GAAG;MACTC,IAAI,EAAE,CAAC;MACPC,GAAG,EAAE;IACT,CAAC;IACD,IAAIC,QAAQ,GAAG;MACXC,KAAK,EAAE,CAAC;MACRC,MAAM,EAAE;IACZ,CAAC;IACD,IAAIrJ,WAAW,GAAG4I,gBAAgB;IAClC,IAAIU,UAAU;IACd,KAAK,IAAI/I,CAAC,GAAG,CAAC,EAAEA,CAAC,IAAIuI,WAAW,EAAEvI,CAAC,EAAE,EAAE;MACnC,IAAIgJ,MAAM;MACV,IAAIhJ,CAAC,GAAGuI,WAAW,EAAE;QACjBC,KAAK,GAAGnD,KAAK,CAAC4D,EAAE,CAACjJ,CAAC,CAAC;QACnByI,MAAM,GAAGD,KAAK,CAACC,MAAM,CAAC,CAAC;QACvBG,QAAQ,GAAGxM,eAAe,CAACoM,KAAK,CAAC5I,GAAG,CAAC,CAAC,CAAC,CAAC;QACxCmJ,UAAU,GAAG,KAAK,KAAKP,KAAK,CAACU,GAAG,CAAC,WAAW,CAAC;MACjD;MACA,MAAMC,WAAW,GAAGV,MAAM,CAACC,IAAI,GAAGE,QAAQ,CAACC,KAAK;MAChD,MAAMO,YAAY,GAAGX,MAAM,CAACE,GAAG,GAAGC,QAAQ,CAACE,MAAM;MACjD,MAAMxG,UAAU,GAAG;QACfL,KAAK,EAAExC,WAAW;QAClBA,WAAW,EAAEA,WAAW;QACxBqD,IAAI,EAAE,IAAI,MAAMkG,MAAM,GAAGR,KAAK,CAAC,IAAI,KAAK,CAAC,KAAKQ,MAAM,GAAG,KAAK,CAAC,GAAGA,MAAM,CAACpJ,GAAG,CAAC,CAAC,CAAC;QAC7EsC,CAAC,EAAE,CAACkG,UAAU,IAAIW,UAAU,MAAM/I,CAAC,KAAKuI,WAAW,CAAC,GAAGY,WAAW,GAAGV,MAAM,CAACC,IAAI;QAChFvG,CAAC,EAAEiG,UAAU,IAAIpI,CAAC,KAAKuI,WAAW,GAAGa,YAAY,GAAGX,MAAM,CAACE;MAC/D,CAAC;MACD,IAAI,CAACP,UAAU,IAAIpI,CAAC,GAAG,CAAC,EAAE;QACtB,MAAMqJ,cAAc,GAAGhE,KAAK,CAAC4D,EAAE,CAACjJ,CAAC,GAAG,CAAC,CAAC,CAACyI,MAAM,CAAC,CAAC;QAC/C,MAAM;UACFI,KAAK,EAAES;QACX,CAAC,GAAGlN,eAAe,CAACiJ,KAAK,CAACrF,CAAC,GAAG,CAAC,CAAC,CAAC;QACjC,MAAMuJ,eAAe,GAAGR,UAAU,GAAGM,cAAc,CAACX,IAAI,GAAGW,cAAc,CAACX,IAAI,GAAGY,aAAa;QAC9F,IAAID,cAAc,CAACV,GAAG,GAAGrG,UAAU,CAACH,CAAC,EAAE;UACnCG,UAAU,CAACH,CAAC,GAAGkH,cAAc,CAACV,GAAG;QACrC;QACA,IAAIL,oBAAoB,IAAIlK,IAAI,CAACoL,KAAK,CAACD,eAAe,CAAC,KAAKnL,IAAI,CAACoL,KAAK,CAAClH,UAAU,CAACJ,CAAC,CAAC,EAAE;UAClF,MAAMuH,cAAc,GAAGlO,QAAQ,CAAC,CAAC,CAAC,EAAE+G,UAAU,EAAE;YAC5CQ,IAAI,EAAEuC,KAAK,CAACrF,CAAC,GAAG,CAAC,CAAC;YAClBkC,CAAC,EAAEqH;UACP,CAAC,CAAC;UACF,IAAIR,UAAU,EAAE;YACZzG,UAAU,CAACoH,eAAe,GAAG,IAAI;YACjCD,cAAc,CAACE,cAAc,GAAG,IAAI;UACxC,CAAC,MAAM;YACHrH,UAAU,CAACqH,cAAc,GAAG,IAAI;YAChCF,cAAc,CAACC,eAAe,GAAG,IAAI;UACzC;UACAtH,cAAc,CAACrC,MAAM,EAAE0J,cAAc,EAAElH,YAAY,CAAC;QACxD;MACJ;MACAH,cAAc,CAACrC,MAAM,EAAEuC,UAAU,EAAEC,YAAY,CAAC;MAChD9C,WAAW,EAAE;IACjB;IACA,OAAOM,MAAM;EACjB,CAAC;EACD6J,qBAAqB,EAAEA,CAAA,MAAO;IAC1BC,8BAA8B,EAAE,IAAI;IACpCC,MAAMA,CAAClF,SAAS,EAAExE,OAAO,EAAE;MACvB,MAAMT,UAAU,GAAG9D,CAAC,CAAC+I,SAAS,CAAC;MAC/B,IAAInI,SAAS,CAAC2D,OAAO,CAACvC,KAAK,CAAC,IAAI,EAAEuC,OAAO,CAACvB,IAAI,IAAIuB,OAAO,CAACvB,IAAI,CAACkL,cAAc,CAAC,IAAI,CAAC3J,OAAO,CAAC4J,GAAG,CAACC,QAAQ,EAAE;QACrG,MAAMC,QAAQ,GAAG9J,OAAO,CAAC+J,SAAS,CAACC,OAAO,CAAC,UAAU,CAAC;QACtDzK,UAAU,CAACiE,QAAQ,CAAC,oBAAoB,CAAC,CAACA,QAAQ,CAAC,uBAAuB,CAAC;QAC3E/H,CAAC,CAAC,OAAO,CAAC,CAAC+H,QAAQ,CAACxD,OAAO,CAACvC,KAAK,GAAG,0BAA0B,GAAG,0BAA0B,CAAC,CAACkG,QAAQ,CAACpE,UAAU,CAAC;QACjHuK,QAAQ,CAACG,OAAO,CAAC,OAAO,EAAEjK,OAAO,CAACvC,KAAK,GAAGqM,QAAQ,CAACI,QAAQ,CAAC,yBAAyB,CAAC,GAAGJ,QAAQ,CAACI,QAAQ,CAAC,uBAAuB,CAAC,EAAE3K,UAAU,CAAC;MACpJ,CAAC,MAAM;QACHD,YAAY,CAACC,UAAU,CAAC;MAC5B;IACJ;EACJ,CAAC,CAAC;EACFD,YAAY,EAAEA,YAAY;EAC1BV,UAAU,EAAEA,UAAU;EACtBuL,iBAAiBA,CAACC,cAAc,EAAE;IAC9B,IAAI;MACA,IAAIA,cAAc,EAAE;QAChB,OAAO;UACHC,cAAc,EAAED,cAAc,CAACC,cAAc;UAC7CC,YAAY,EAAEF,cAAc,CAACE;QACjC,CAAC;MACL;IACJ,CAAC,CAAC,OAAOC,CAAC,EAAE,CAAC;IACb,OAAO,CAAC,CAAC;EACb,CAAC;EACDC,iBAAiBA,CAACJ,cAAc,EAAEK,cAAc,EAAE;IAC9C,IAAI;MACA,IAAIL,cAAc,IAAIA,cAAc,CAACI,iBAAiB,EAAE;QACpDJ,cAAc,CAACI,iBAAiB,CAACC,cAAc,CAACJ,cAAc,EAAEI,cAAc,CAACH,YAAY,CAAC;MAChG;IACJ,CAAC,CAAC,OAAOC,CAAC,EAAE,CAAC;EACjB,CAAC;EACDG,qBAAqBA,CAACX,SAAS,EAAE/I,QAAQ,EAAE;IACvC,MAAM2J,SAAS,GAAG3J,QAAQ,CAAC0C,EAAE,CAAC,QAAQ,CAAC;IACvCtI,YAAY,CAACwP,OAAO,CAAC5J,QAAQ,EAAE,OAAO,CAAC;IACvC,MAAM6J,0BAA0B,GAAGd,SAAS,CAAC3F,MAAM,CAAC,+BAA+B,CAAC;IACpF,MAAMtB,OAAO,GAAG9B,QAAQ,CAACxB,GAAG,CAAC,CAAC,CAAC;IAC/B,IAAI,CAACmL,SAAS,IAAIE,0BAA0B,IAAI7J,QAAQ,CAAC0C,EAAE,CAAC,sBAAsB,CAAC,IAAI,CAAC1C,QAAQ,CAAC0C,EAAE,CAAC,YAAY,CAAC,EAAE;MAC/G,MAAMoH,MAAM,GAAG/J,iBAAiB,CAACC,QAAQ,CAAC+J,OAAO,CAAC,gBAAgB,CAAC,CAAC;MACpElP,IAAI,CAACiP,MAAM,IAAIA,MAAM,CAACE,iBAAiB,CAAC,CAACC,IAAI,CAAE,MAAM;QACjDnI,OAAO,CAACoI,MAAM,CAAC,CAAC;MACpB,CAAE,CAAC;IACP;EACJ,CAAC;EACDnK,iBAAiB,EAAEA,iBAAiB;EACpCoK,2BAA2BA,CAACC,OAAO,EAAEC,YAAY,EAAE;IAC/C,MAAMC,mBAAmB,GAAGF,OAAO,CAACG,IAAI,CAAEnF,MAAM,IAAIA,MAAM,IAAI,CAACA,MAAM,CAACoF,OAAO,IAAI,CAACpF,MAAM,CAACqF,KAAK,IAAI,KAAK,KAAKrF,MAAM,CAACsF,aAAc,CAAC;IAClI,IAAIC,eAAe;IACnB,KAAKA,eAAe,GAAGP,OAAO,CAACvL,MAAM,GAAG,CAAC,EAAEuL,OAAO,CAACO,eAAe,CAAC,EAAEA,eAAe,EAAE,EAAE;MACpF,MAAMvF,MAAM,GAAGgF,OAAO,CAACO,eAAe,CAAC;MACvC,MAAMlD,KAAK,GAAG4C,YAAY,IAAIA,YAAY,CAACM,eAAe,CAAC;MAC3D,MAAMD,aAAa,GAAG,CAACJ,mBAAmB,IAAI,KAAK,KAAKlF,MAAM,CAACsF,aAAa;MAC5E,IAAI,CAACtF,MAAM,CAACoF,OAAO,IAAI,CAACpF,MAAM,CAACqF,KAAK,IAAI,gBAAgB,KAAKhD,KAAK,IAAIiD,aAAa,EAAE;QACjF;MACJ;IACJ;IACA,OAAOC,eAAe;EAC1B,CAAC;EACDC,sBAAsBA,CAACC,UAAU,EAAE7K,QAAQ,EAAE;IACzC,IAAIA,QAAQ,IAAIA,QAAQ,CAACnB,MAAM,EAAE;MAC7B,MAAMiM,KAAK,GAAG9K,QAAQ,CAAC+J,OAAO,CAAC,IAAIc,UAAU,CAACE,uBAAuB,CAAC,CAAC,EAAE,CAAC,CAACtI,MAAM,CAAC,CAAC;MACnF,OAAOqI,KAAK,CAACpI,EAAE,CAACmI,UAAU,CAAC9B,SAAS,CAAC/I,QAAQ,CAAC,CAAC,CAAC;IACpD;IACA,OAAO,KAAK;EAChB,CAAC;EACDgL,qBAAqBA,CAACnJ,IAAI,EAAE;IACxB,MAAMoJ,gBAAgB,GAAGpJ,IAAI,CAACuB,MAAM,CAAC9G,yBAAyB,CAAC;IAC/D,MAAM4O,aAAa,GAAG,SAAS,KAAKrJ,IAAI,CAACuB,MAAM,CAAC,gBAAgB,CAAC;IACjE,MAAM+H,YAAY,GAAG,UAAU,KAAKtJ,IAAI,CAACuB,MAAM,CAAC,gBAAgB,CAAC;IACjE,IAAI,KAAK,KAAKvB,IAAI,CAACuB,MAAM,CAAChH,qBAAqB,CAAC,KAAK8O,aAAa,IAAIC,YAAY,CAAC,EAAE;MACjF,OAAO,IAAI;IACf;IACA,OAAO,SAAS,KAAKF,gBAAgB;EACzC,CAAC;EACDG,aAAa,EAAEC,MAAM,IAAIA,MAAM,CAACC,gBAAgB,IAAI,CAAC;EACrDC,qBAAqBA,CAACC,OAAO,EAAE;IAC3B,IAAIA,OAAO,CAACC,OAAO,EAAE;MACjB,OAAO,GAAG;IACd;IACA,OAAO,IAAI,GAAG,IAAI,CAACL,aAAa,CAAC3P,SAAS,CAAC,CAAC,CAAC;EACjD,CAAC;EACDiQ,yBAAyBA,CAAC/F,MAAM,EAAE;IAC9B,IAAIgG,uBAAuB;IAC3B,IAAIhG,MAAM,CAAC1B,KAAK,EAAE;MACd0H,uBAAuB,GAAGhG,MAAM,CAAC1B,KAAK;IAC1C,CAAC,MAAM;MACH0H,uBAAuB,GAAGhG,MAAM,CAACX,UAAU;MAC3C,IAAI1J,UAAU,CAACqQ,uBAAuB,CAAC,IAAI,CAACnQ,eAAe,CAACoQ,SAAS,CAACD,uBAAuB,CAAC,EAAE;QAC5FA,uBAAuB,GAAGA,uBAAuB,CAAC,CAAC,CAAC,CAAC;MACzD;IACJ;IACA,OAAOrR,0BAA0B,CAACqR,uBAAuB,CAAC;EAC9D,CAAC;EACDE,0BAA0BA,CAACzG,MAAM,EAAEJ,UAAU,EAAE8G,MAAM,EAAE;IACnD,IAAI,CAAC9G,UAAU,EAAE;MACb,OAAO,EAAE;IACb;IACA,MAAM2G,uBAAuB,GAAG,IAAI,CAACD,yBAAyB,CAACtG,MAAM,CAACO,MAAM,CAAC;IAC7E,IAAIP,MAAM,CAACzH,kBAAkB,KAAKyH,MAAM,CAAC2G,yBAAyB,EAAE;MAChE,OAAOJ,uBAAuB;IAClC;IACA,MAAMK,cAAc,GAAGhH,UAAU,CAACiH,gBAAgB,CAAC,CAAC,CAACC,WAAW;IAChE,MAAMC,qBAAqB,GAAG/G,MAAM,CAACgH,YAAY,IAAI7Q,QAAQ,CAAC6J,MAAM,CAACgH,YAAY,CAAC;IAClF,IAAIC,yBAAyB;IAC7B,IAAIC,YAAY;IAChB,IAAIC,YAAY;IAChB,MAAMC,UAAU,GAAGA,CAACvI,KAAK,EAAEwI,WAAW,KAAK;MACvC,MAAMC,KAAK,GAAGD,WAAW,CAACE,IAAI,IAAI,CAAC;MACnC,MAAMC,GAAG,GAAGH,WAAW,CAACI,IAAI,GAAGH,KAAK,GAAGD,WAAW,CAACI,IAAI,GAAG5I,KAAK,CAACpF,MAAM;MACtE,OAAOoF,KAAK,CAAC6I,KAAK,CAACJ,KAAK,EAAEE,GAAG,CAAC;IAClC,CAAC;IACD,MAAMG,gBAAgB,GAAG5S,QAAQ,CAAC,CAAC,CAAC,EAAEwR,uBAAuB,EAAE;MAC3DqB,sBAAsB,EAAElB,MAAM;MAC9BmB,IAAI,EAAER,WAAW,IAAI;QACjB,MAAMS,CAAC,GAAG,IAAItS,QAAQ,CAAD,CAAC;QACtB,CAAC6R,WAAW,IAAI;UACZ,MAAMjL,KAAK,GAAGD,4BAA4B,CAAC4K,qBAAqB,GAAG,CAAC/G,MAAM,CAACc,SAAS,EAAEd,MAAM,CAACgH,YAAY,CAAC,GAAGhH,MAAM,CAACc,SAAS,CAAC;UAC9H,MAAMgH,CAAC,GAAG,IAAItS,QAAQ,CAAD,CAAC;UACtB,MAAMuS,WAAW,GAAGd,yBAAyB,KAAK,CAACL,cAAc,IAAIS,WAAW,CAACE,IAAI,KAAKJ,YAAY,IAAIE,WAAW,CAACI,IAAI,KAAKP,YAAY,CAAC;UAC5I,IAAIa,WAAW,EAAE;YACbD,CAAC,CAACE,OAAO,CAACZ,UAAU,CAACH,yBAAyB,EAAEI,WAAW,CAAC,CAAC;UACjE,CAAC,MAAM;YACHF,YAAY,GAAGE,WAAW,CAACE,IAAI;YAC/BL,YAAY,GAAGG,WAAW,CAACI,IAAI;YAC/B7H,UAAU,CAACiI,IAAI,CAAC;cACZnB,MAAM,EAAEA,MAAM;cACdtK,KAAK,EAAEA,KAAK;cACZqL,IAAI,EAAEb,cAAc,GAAGS,WAAW,CAACI,IAAI,GAAG,KAAK,CAAC;cAChDF,IAAI,EAAEX,cAAc,GAAGS,WAAW,CAACE,IAAI,GAAG,KAAK;YACnD,CAAC,CAAC,CAAC1C,IAAI,CAAEhG,KAAK,IAAI;cACdoI,yBAAyB,GAAGpI,KAAK;cACjCiJ,CAAC,CAACE,OAAO,CAACpB,cAAc,GAAG/H,KAAK,GAAGuI,UAAU,CAACvI,KAAK,EAAEwI,WAAW,CAAC,CAAC;YACtE,CAAE,CAAC,CAACY,IAAI,CAACH,CAAC,CAACG,IAAI,CAAC;UACpB;UACA,OAAOH,CAAC;QACZ,CAAC,EAAET,WAAW,CAAC,CAACxC,IAAI,CAAEhG,KAAK,IAAI;UAC3B,IAAI,CAAC,KAAKA,KAAK,CAACpF,MAAM,EAAE;YACpBqO,CAAC,CAACE,OAAO,CAAC,EAAE,CAAC;YACb;UACJ;UACA,MAAMtB,MAAM,GAAG,IAAI,CAAC3H,cAAc,CAACF,KAAK,CAACqJ,OAAO,CAAE7P,IAAI,IAAIA,IAAI,CAACuG,GAAI,CAAC,CAACvC,GAAG,CAAEuC,GAAG,IAAI,CAACoB,MAAM,CAACO,MAAM,CAAC4H,SAAS,EAAEvJ,GAAG,CAAE,CAAC,EAAE,IAAI,CAAC;UACxH,MAAMwJ,aAAa,GAAG,IAAInT,UAAU,CAACF,QAAQ,CAAC,CAAC,CAAC,EAAEwR,uBAAuB,EAAEc,WAAW,EAAE;YACpFX,MAAM,EAAE,IAAI,CAAC3H,cAAc,CAAC,CAAC2H,MAAM,EAAEW,WAAW,CAACX,MAAM,CAAC,EAAE,KAAK,CAAC;YAChE2B,QAAQ,EAAE;UACd,CAAC,CAAC,CAAC;UACHD,aAAa,CAACP,IAAI,CAAC,CAAC,CAAChD,IAAI,CAACiD,CAAC,CAACE,OAAO,CAAC,CAACC,IAAI,CAACH,CAAC,CAACG,IAAI,CAAC;QACrD,CAAE,CAAC,CAACA,IAAI,CAACH,CAAC,CAACG,IAAI,CAAC;QAChB,OAAOH,CAAC;MACZ,CAAC;MACDlJ,GAAG,EAAEoB,MAAM,CAACO,MAAM,CAAC4H,SAAS;MAC5BG,KAAKA,CAAC1J,GAAG,EAAE;QACP,MAAMkJ,CAAC,GAAGtS,QAAQ,CAAC,CAAC;QACpB,IAAI,CAACqS,IAAI,CAAC;UACNnB,MAAM,EAAE,CAAC1G,MAAM,CAACO,MAAM,CAAC4H,SAAS,EAAE,GAAG,EAAEvJ,GAAG;QAC9C,CAAC,CAAC,CAACiG,IAAI,CAAE0D,GAAG,IAAI;UACZT,CAAC,CAACE,OAAO,CAACO,GAAG,CAAC,CAAC,CAAC,CAAC;QACrB,CAAE,CAAC;QACH,OAAOT,CAAC,CAACU,OAAO,CAAC,CAAC;MACtB;IACJ,CAAC,CAAC;IACF,OAAOb,gBAAgB;EAC3B,CAAC;EACDc,sCAAsCA,CAAC9E,SAAS,EAAE;IAC9C,MAAM+E,UAAU,GAAG/E,SAAS,CAACgF,2BAA2B,CAACzH,IAAI,CAACyC,SAAS,CAAC;IACxE,IAAI1N,SAAS,CAAC0N,SAAS,CAAC3F,MAAM,CAAC,0BAA0B,CAAC,CAAC,EAAE;MACzD0K,UAAU,CAAC,0BAA0B,EAAE;QACnCE,KAAK,EAAE,MAAM;QACbC,KAAK,EAAE;MACX,CAAC,CAAC;IACN;IACA,IAAI5S,SAAS,CAAC0N,SAAS,CAAC3F,MAAM,CAAC,4BAA4B,CAAC,CAAC,EAAE;MAC3D0K,UAAU,CAAC,4BAA4B,EAAE;QACrCE,KAAK,EAAE,MAAM;QACbC,KAAK,EAAE;MACX,CAAC,CAAC;IACN;IACA,MAAMC,YAAY,GAAG,aAAa,KAAKnF,SAAS,CAACoF,IAAI,GAAG,mBAAmB,GAAG,SAAS;IACvF,MAAM/D,OAAO,GAAGrB,SAAS,CAAC3F,MAAM,CAAC8K,YAAY,CAAC;IAC9C,IAAI,CAAC1N,KAAK,CAACC,OAAO,CAAC2J,OAAO,CAAC,EAAE;MACzB;IACJ;IACA,MAAMgE,kCAAkC,GAAGhE,OAAO,IAAI;MAClDA,OAAO,CAACiE,OAAO,CAAEjJ,MAAM,IAAI;QACvB,IAAIkJ,eAAe;QACnB,MAAMC,YAAY,GAAGnJ,MAAM,CAACmJ,YAAY,IAAI,CAAC,CAAC;QAC9C,IAAIlT,SAAS,CAACkT,YAAY,CAACC,WAAW,CAAC,EAAE;UACrCV,UAAU,CAAC,GAAGI,YAAY,6BAA6B,EAAE;YACrDF,KAAK,EAAE,MAAM;YACbC,KAAK,EAAE,GAAGC,YAAY;UAC1B,CAAC,CAAC;QACN;QACA,IAAI7S,SAAS,CAACkT,YAAY,CAACE,UAAU,CAAC,EAAE;UACpCX,UAAU,CAAC,GAAGI,YAAY,4BAA4B,EAAE;YACpDF,KAAK,EAAE,MAAM;YACbC,KAAK,EAAE,GAAGC,YAAY;UAC1B,CAAC,CAAC;QACN;QACA,IAAI,IAAI,MAAMI,eAAe,GAAGlJ,MAAM,CAACgF,OAAO,CAAC,IAAI,KAAK,CAAC,KAAKkE,eAAe,IAAIA,eAAe,CAACzP,MAAM,EAAE;UACrGuP,kCAAkC,CAAChJ,MAAM,CAACgF,OAAO,CAAC;QACtD;MACJ,CAAE,CAAC;IACP,CAAC;IACDgE,kCAAkC,CAAChE,OAAO,CAAC;EAC/C,CAAC;EACDsE,uBAAuBA,CAAC7M,IAAI,EAAE8M,gBAAgB,EAAE;IAC5C,MAAMC,WAAW,GAAG/M,IAAI,CAACuB,MAAM,CAAC,aAAa,CAAC,GAAGpG,IAAI,CAAC6R,IAAI,CAAC1T,aAAa,CAACwT,gBAAgB,CAAC,GAAGzT,aAAa,CAACyT,gBAAgB,CAAC,CAAC,GAAG,CAAC;IACjI,OAAOC,WAAW;EACtB,CAAC;EACDE,qBAAqBA,CAAC1E,OAAO,EAAE2E,aAAa,EAAE;IAC1C,MAAMC,oBAAoB,GAAG5E,OAAO,CAAC0B,MAAM,CAAE1G,MAAM,IAAIA,MAAM,CAAC6J,IAAI,KAAKF,aAAa,CAACE,IAAK,CAAC;IAC3F,OAAO,CAAC,CAACD,oBAAoB,CAACnQ,MAAM;EACxC;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}